{"version":3,"file":"connectToContainer.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_unpackPlotProps","_lib","_excluded","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","o","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","__signature__","signature","containerConnectedContextTypes","exports","localize","PropTypes","func","container","object","data","array","defaultContainer","fullContainer","fullData","fullLayout","getDflt","getValObject","graphDiv","layout","onUpdate","plotly","updateContainer","traceIndexes","customConfig","hasValidCustomConfigVisibilityRules","bool","resettable","foldInfo","connectToContainer","WrappedComponent","config","ContainerConnectedComponent","Component","modifyPlotProps","props","context","plotProps","constructor","setLocals","UNSAFE_componentWillReceiveProps","nextProps","nextContext","unpackPlotProps","attr","getChildContext","description","render","_Object$assign","wrappedComponentDisplayName","displayName","isVisibleGivenCustomConfig","isVisible","createElement","__reactstandin__regenerateByEval","key","code","eval","concat","getDisplayName","contextTypes","childContextTypes","string","plotly_editor_traits","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/connectToContainer.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport unpackPlotProps, {isVisibleGivenCustomConfig} from './unpackPlotProps';\nimport {getDisplayName} from '../lib';\n\nexport const containerConnectedContextTypes = {\n  localize: PropTypes.func,\n  container: PropTypes.object,\n  data: PropTypes.array,\n  defaultContainer: PropTypes.object,\n  fullContainer: PropTypes.object,\n  fullData: PropTypes.array,\n  fullLayout: PropTypes.object,\n  getDflt: PropTypes.func,\n  getValObject: PropTypes.func,\n  graphDiv: PropTypes.object,\n  layout: PropTypes.object,\n  onUpdate: PropTypes.func,\n  plotly: PropTypes.object,\n  updateContainer: PropTypes.func,\n  traceIndexes: PropTypes.array,\n  customConfig: PropTypes.object,\n  hasValidCustomConfigVisibilityRules: PropTypes.bool,\n  resettable: PropTypes.bool,\n  foldInfo: PropTypes.object,\n};\n\nexport default function connectToContainer(WrappedComponent, config = {}) {\n  class ContainerConnectedComponent extends Component {\n    // Run the inner modifications first and allow more recent modifyPlotProp\n    // config function to modify last.\n    static modifyPlotProps(props, context, plotProps) {\n      if (WrappedComponent.modifyPlotProps) {\n        WrappedComponent.modifyPlotProps(props, context, plotProps);\n      }\n      if (config.modifyPlotProps) {\n        config.modifyPlotProps(props, context, plotProps);\n      }\n    }\n\n    constructor(props, context) {\n      super(props, context);\n\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      this.plotProps = unpackPlotProps(props, context, WrappedComponent);\n      this.attr = props.attr;\n      ContainerConnectedComponent.modifyPlotProps(props, context, this.plotProps);\n    }\n\n    getChildContext() {\n      return {\n        description: this.plotProps.description,\n        attr: this.attr,\n      };\n    }\n\n    render() {\n      // Merge plotprops onto props so leaf components only need worry about\n      // props. However pass plotProps as a specific prop in case inner component\n      // is also wrapped by a component that `unpackPlotProps`. That way inner\n      // component can skip computation as it can see plotProps is already defined.\n      const {plotProps = this.plotProps, ...props} = Object.assign({}, this.plotProps, this.props);\n      const wrappedComponentDisplayName =\n        WrappedComponent && WrappedComponent.displayName ? WrappedComponent.displayName : null;\n\n      if (\n        isVisibleGivenCustomConfig(\n          props.isVisible,\n          props,\n          this.context,\n          wrappedComponentDisplayName\n        )\n      ) {\n        return <WrappedComponent {...props} plotProps={plotProps} />;\n      }\n\n      return null;\n    }\n  }\n\n  ContainerConnectedComponent.displayName = `ContainerConnected${getDisplayName(WrappedComponent)}`;\n\n  ContainerConnectedComponent.contextTypes = containerConnectedContextTypes;\n  ContainerConnectedComponent.childContextTypes = {\n    description: PropTypes.string,\n    attr: PropTypes.string,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  ContainerConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return ContainerConnectedComponent;\n}\n"],"mappings":"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","ignoreList":[]}