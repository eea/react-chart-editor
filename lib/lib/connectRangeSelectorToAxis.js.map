{"version":3,"file":"connectRangeSelectorToAxis.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","_constants","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","connectRangeSelectorToAxis","WrappedComponent","RangeSelectorConnectedComponent","Component","constructor","props","context","deleteRangeselector","bind","updateRangeselector","setLocals","UNSAFE_componentWillReceiveProps","nextProps","nextContext","rangeselectorIndex","container","fullContainer","rangeselectors","rangeselector","buttons","fullRangeselectors","getChildContext","getValObject","attr","concat","updateContainer","deleteContainer","update","newUpdate","key","newkey","onUpdate","type","EDITOR_ACTIONS","DELETE_RANGESELECTOR","payload","axisId","_name","render","createElement","__reactstandin__regenerateByEval","code","eval","displayName","getDisplayName","propTypes","PropTypes","number","isRequired","contextTypes","object","data","array","func","childContextTypes","plotly_editor_traits","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/connectRangeSelectorToAxis.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\nimport {EDITOR_ACTIONS} from './constants';\n\nexport default function connectRangeSelectorToAxis(WrappedComponent) {\n  class RangeSelectorConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n\n      this.deleteRangeselector = this.deleteRangeselector.bind(this);\n      this.updateRangeselector = this.updateRangeselector.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {rangeselectorIndex} = props;\n      const {container, fullContainer} = context;\n\n      const rangeselectors = container.rangeselector ? container.rangeselector.buttons || [] : [];\n      const fullRangeselectors = fullContainer.rangeselector\n        ? fullContainer.rangeselector.buttons || []\n        : [];\n      this.container = rangeselectors[rangeselectorIndex];\n      this.fullContainer = fullRangeselectors[rangeselectorIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject\n            ? null\n            : this.context.getValObject(`rangeselector.buttons[].${attr}`),\n        updateContainer: this.updateRangeselector,\n        deleteContainer: this.deleteRangeselector,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateRangeselector(update) {\n      const newUpdate = {};\n      const {rangeselectorIndex} = this.props;\n      for (const key in update) {\n        const newkey = `rangeselector.buttons[${rangeselectorIndex}].${key}`;\n        newUpdate[newkey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    deleteRangeselector() {\n      if (this.context.onUpdate) {\n        this.context.onUpdate({\n          type: EDITOR_ACTIONS.DELETE_RANGESELECTOR,\n          payload: {\n            axisId: this.context.fullContainer._name,\n            rangeselectorIndex: this.props.rangeselectorIndex,\n          },\n        });\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  RangeSelectorConnectedComponent.displayName = `RangeSelectorConnected${getDisplayName(\n    WrappedComponent\n  )}`;\n\n  RangeSelectorConnectedComponent.propTypes = {\n    rangeselectorIndex: PropTypes.number.isRequired,\n  };\n\n  RangeSelectorConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    data: PropTypes.array,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  RangeSelectorConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    deleteContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  RangeSelectorConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return RangeSelectorConnectedComponent;\n}\n"],"mappings":"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","ignoreList":[]}