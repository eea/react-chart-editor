"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAdjustedSrcAttr=getAdjustedSrcAttr;exports.getAttrsPath=getAttrsPath;exports.getData=getData;exports.getSrcAttr=getSrcAttr;exports.inSrcAttr=inSrcAttr;var _nested_property=_interopRequireDefault(require("plotly.js/src/lib/nested_property"));var _=require("./");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(function(){var enterModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.enterModule:undefined;enterModule&&enterModule(module)})();function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+""}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var __signature__=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default.signature:function(a){return a};function getAttrsPath(container,allowedAttributes){const srcAttributes={};function recursiveSearch(container){let path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(!container||typeof container!=="object"){return}if(Array.isArray(container)){container.forEach((value,index)=>{recursiveSearch(value,"".concat(path,"[").concat(index,"]"))});return}Object.entries(container).forEach(_ref=>{let[key,value]=_ref;const newPath=path?"".concat(path,".").concat(key):key;if(allowedAttributes.includes(newPath.replace(/\[\d+\]/g,"[]"))&&Array.isArray(value)){srcAttributes[newPath]=value}recursiveSearch(value,newPath)})}recursiveSearch(container);return srcAttributes}function getSrcAttr(container,attr,srcConverters){const key=attr+"src";const srcProperty=(0,_nested_property.default)(container,key).get();const value=srcConverters?srcConverters.toSrc(srcProperty,container===null||container===void 0?void 0:container.type):srcProperty;return{key,value,originalValue:value,attr}}function getAdjustedSrcAttr(srcAttr){return Array.isArray(srcAttr.value)&&srcAttr.value.length===1&&(srcAttr.attr==="x"||srcAttr.attr==="y")?_objectSpread(_objectSpread({},srcAttr),{},{value:srcAttr.value[0]||null}):srcAttr}function getData(container,srcAttr,dataSources){let data;const srcAttrValue=Array.isArray(srcAttr.value)&&srcAttr.value.length===1&&(srcAttr.attr==="x"||srcAttr.attr==="y")?srcAttr.value[0]:srcAttr.value;if(Array.isArray(srcAttrValue)){data=srcAttrValue.filter(v=>Array.isArray(dataSources[v])).map(v=>dataSources[v])}else{data=dataSources[srcAttrValue]||null}return(0,_.maybeTransposeData)(data,srcAttr.key,container.type)}function inSrcAttr(srcAttr,value){if(Array.isArray(srcAttr.value)&&srcAttr.value.indexOf(value)>-1){return true}if(typeof srcAttr.value==="string"&&srcAttr.value===value){return true}return false};(function(){var reactHotLoader=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default:undefined;if(!reactHotLoader){return}reactHotLoader.register(getAttrsPath,"getAttrsPath","/Users/razvan/Work/react-chart-editor/src/lib/dataSources.js");reactHotLoader.register(getSrcAttr,"getSrcAttr","/Users/razvan/Work/react-chart-editor/src/lib/dataSources.js");reactHotLoader.register(getAdjustedSrcAttr,"getAdjustedSrcAttr","/Users/razvan/Work/react-chart-editor/src/lib/dataSources.js");reactHotLoader.register(getData,"getData","/Users/razvan/Work/react-chart-editor/src/lib/dataSources.js");reactHotLoader.register(inSrcAttr,"inSrcAttr","/Users/razvan/Work/react-chart-editor/src/lib/dataSources.js")})();;(function(){var leaveModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.leaveModule:undefined;leaveModule&&leaveModule(module)})();
//# sourceMappingURL=dataSources.js.map