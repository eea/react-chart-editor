{"version":3,"file":"test-utils.js","names":["_plotlyCartesian","_interopRequireDefault","require","_extend","_EditorControls","_enzyme","_lib","_enzymeAdapterReact","e","__esModule","default","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","a","configure","adapter","Adapter","fixtures","exports","scatter","config","applyConfig","dataSources","x1","y1","y2","dataSourceOptions","label","value","graphDiv","data","xsrc","ysrc","name","type","yaxis","layout","title","yaxis2","titlefont","color","tickfont","overlaying","side","area","mode","stackgroup","pie","labelssrc","valuessrc","arguments","length","extendDeep","deref","dereference","setupGraphDiv","customConfig","mockMissingSvgApis","p","document","createElementNS","proto","Object","getPrototypeOf","getTotalLength","getPointAtLength","x","y","newGraphDiv","window","createElement","id","figure","plotly","plotlyCartesian","gd","newPlot","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/test-utils.js"],"sourcesContent":["import plotlyCartesian from 'plotly.js/dist/plotly-cartesian';\nimport {extendDeep} from 'plotly.js/src/lib/extend';\nimport EditorControls from '../EditorControls';\nimport {configure, mount, shallow} from 'enzyme';\nimport {dereference} from '../lib';\nimport Adapter from 'enzyme-adapter-react-16';\n\nconfigure({adapter: new Adapter()});\n\n/* eslint-disable no-magic-numbers */\n\nconst fixtures = {\n  scatter(config) {\n    return applyConfig(config, {\n      dataSources: {\n        x1: [1, 2, 3],\n        y1: [2, 3, 4],\n        y2: [20, 30, 40],\n      },\n      dataSourceOptions: [\n        {label: 'xCol', value: 'x1'},\n        {label: 'yCol', value: 'y1'},\n        {label: 'yCol2', value: 'y2'},\n      ],\n      graphDiv: {\n        data: [\n          {\n            xsrc: 'x1',\n            ysrc: 'y1',\n            name: 'yaxis data',\n            type: 'scatter',\n          },\n          {\n            xsrc: 'x1',\n            ysrc: 'y2',\n            name: 'yaxis2 data',\n            yaxis: 'y2',\n            type: 'scatter',\n          },\n        ],\n        layout: {\n          title: 'Double Y Axis Example',\n          yaxis: {},\n          yaxis2: {\n            title: 'yaxis2 title',\n            titlefont: {color: 'rgb(148, 103, 189)'},\n            tickfont: {color: 'rgb(148, 103, 189)'},\n            overlaying: 'y',\n            side: 'right',\n          },\n        },\n      },\n    });\n  },\n\n  area(config) {\n    return applyConfig(config, {\n      dataSources: {\n        x1: [1, 2, 3],\n        y1: [2, 3, 4],\n      },\n      dataSourceOptions: [\n        {label: 'xCol', value: 'x1'},\n        {label: 'yCol', value: 'y1'},\n      ],\n      graphDiv: {\n        data: [\n          {\n            type: 'scatter',\n            mode: 'markers+lines',\n            stackgroup: 1,\n            xsrc: 'x1',\n            ysrc: 'y1',\n          },\n        ],\n        layout: {},\n      },\n    });\n  },\n\n  pie(config) {\n    return applyConfig(config, {\n      dataSources: {\n        x1: [1, 2, 3],\n        y1: [2, 3, 4],\n      },\n      dataSourceOptions: [\n        {label: 'xCol', value: 'x1'},\n        {label: 'yCol', value: 'y1'},\n      ],\n      graphDiv: {\n        data: [{type: 'pie', mode: 'markers', labelssrc: 'x1', valuessrc: 'y1'}],\n        layout: {},\n      },\n    });\n  },\n};\n\nfunction applyConfig(config = {}, {graphDiv: {data, layout}, dataSourceOptions, dataSources}) {\n  if (config.layout) {\n    extendDeep(layout, config.layout);\n  }\n  if (config.data) {\n    extendDeep(data, config.data);\n  }\n  if (config.deref !== false) {\n    dereference(data, dataSources);\n  }\n\n  // replace simple graphDiv with properly mocked GD including fullData/fullLayout\n  const graphDiv = setupGraphDiv({data, layout});\n\n  return {dataSources, dataSourceOptions, graphDiv, customConfig: config.customConfig || {}};\n}\n\n/*\n * JSDOM does not implement full SVG spec. Mock out necessary methods here.\n * https://github.com/tmpvar/jsdom/issues/1330\n * Hardcoded return values have been \"good enough\" for now but feel free to\n * extend the API if necessary.\n */\nfunction mockMissingSvgApis() {\n  const p = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  const proto = Object.getPrototypeOf(p);\n  if (typeof proto.getTotalLength !== 'function') {\n    proto.getTotalLength = () => 100;\n  }\n  if (typeof proto.getPointAtLength !== 'function') {\n    proto.getPointAtLength = () => ({x: 0, y: 0});\n  }\n}\n\nfunction newGraphDiv() {\n  const graphDiv = window.document.createElement('div');\n  graphDiv.id = 'graphDiv';\n\n  return graphDiv;\n}\n\nfunction setupGraphDiv(figure, plotly = plotlyCartesian) {\n  const gd = newGraphDiv();\n\n  mockMissingSvgApis();\n\n  plotly.newPlot(gd, figure);\n  return gd;\n}\n\nexport {\n  fixtures,\n  plotlyCartesian as plotly,\n  EditorControls as TestEditor,\n  mount,\n  shallow,\n  setupGraphDiv,\n};\n"],"mappings":"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","ignoreList":[]}