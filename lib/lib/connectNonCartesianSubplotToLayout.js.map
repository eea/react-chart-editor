{"version":3,"file":"connectNonCartesianSubplotToLayout.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","__signature__","signature","connectNonCartesianSubplotToLayout","WrappedComponent","SubplotConnectedComponent","Component","constructor","props","context","updateSubplot","setLocals","UNSAFE_componentWillReceiveProps","nextProps","nextContext","subplot","traceIndexes","container","fullContainer","data","trace","fullTrace","getFullTrace","icon","renderTraceIcon","plotlyTraceToCustomTrace","name","getChildContext","getValObject","attr","concat","updateContainer","update","newUpdate","key","render","createElement","__reactstandin__regenerateByEval","code","eval","displayName","getDisplayName","propTypes","PropTypes","string","isRequired","contextTypes","object","array","fullData","onUpdate","func","childContextTypes","deleteContainer","plotly_editor_traits","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/connectNonCartesianSubplotToLayout.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName, plotlyTraceToCustomTrace, renderTraceIcon, getFullTrace} from '../lib';\n\nexport default function connectNonCartesianSubplotToLayout(WrappedComponent) {\n  class SubplotConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n\n      this.updateSubplot = this.updateSubplot.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {subplot, traceIndexes} = props;\n      const {container, fullContainer, data} = context;\n\n      this.container = container[subplot] || {};\n      this.fullContainer = fullContainer[subplot] || {};\n\n      const trace = traceIndexes.length > 0 ? data[traceIndexes[0]] : {};\n      const fullTrace = getFullTrace(props, context);\n\n      if (trace && fullTrace) {\n        this.icon = renderTraceIcon(plotlyTraceToCustomTrace(trace));\n        this.name = fullTrace.name;\n      }\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject\n            ? null\n            : this.context.getValObject(`${this.props.subplot}.${attr}`),\n        updateContainer: this.updateSubplot,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateSubplot(update) {\n      const newUpdate = {};\n      for (const key in update) {\n        newUpdate[`${this.props.subplot}.${key}`] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent name={this.name} icon={this.icon} {...this.props} />;\n    }\n  }\n\n  SubplotConnectedComponent.displayName = `SubplotConnected${getDisplayName(WrappedComponent)}`;\n\n  SubplotConnectedComponent.propTypes = {\n    subplot: PropTypes.string.isRequired,\n  };\n\n  SubplotConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    data: PropTypes.array,\n    fullData: PropTypes.array,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  SubplotConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    deleteContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  SubplotConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return SubplotConnectedComponent;\n}\n"],"mappings":"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","ignoreList":[]}