{"version":3,"file":"dereference-test.js","names":["_dereference","_interopRequireDefault","require","e","__esModule","default","__signature__","reactHotLoaderGlobal","signature","a","describe","it","container","y","ysrc","xsrc","dereference","x1","expect","toBeUndefined","Array","isArray","x","toBe","transforms","zsrc","type","z1","z2","z","customParsing","src","split","toSrc","metasrc","xaxis","ticktext","x2","meta"],"sources":["../../../src/lib/__tests__/dereference-test.js"],"sourcesContent":["import dereference from '../dereference';\n\n/* eslint-disable no-magic-numbers */\ndescribe('dereference', () => {\n  it('does not search into data arrays', () => {\n    const container = [{y: [{ysrc: 'x1'}], xsrc: 'x1'}];\n    dereference(container, {x1: [1, 2, 3]});\n\n    expect(container[0].y[0].y).toBeUndefined();\n    expect(Array.isArray(container[0].x)).toBe(true);\n  });\n\n  it('does searches into transform arrays', () => {\n    const container = [{transforms: [{ysrc: 'x1'}], xsrc: 'x1'}];\n    dereference(container, {x1: [1, 2, 3]});\n\n    expect(Array.isArray(container[0].transforms[0].y)).toBe(true);\n    expect(Array.isArray(container[0].x)).toBe(true);\n  });\n\n  it('handles multidimensional srcs correctly', () => {\n    const container = [{zsrc: ['z1', 'z2'], type: 'heatmap'}];\n    dereference(container, {z1: [1, 2, 3], z2: [2, 2, 2]});\n\n    // contents should have been transposed\n    expect(Array.isArray(container[0].z[0])).toBe(true);\n    expect(Array.isArray(container[0].z[1])).toBe(true);\n    expect(Array.isArray(container[0].z[2])).toBe(true);\n\n    expect(container[0].z[0][0]).toBe(1);\n    expect(container[0].z[0][1]).toBe(2);\n    expect(container[0].z[1][0]).toBe(2);\n    expect(container[0].z[1][1]).toBe(2);\n    expect(container[0].z[2][0]).toBe(3);\n    expect(container[0].z[2][1]).toBe(2);\n  });\n\n  it('handles ambiguous 2d srcs correctly', () => {\n    const container = [{zsrc: ['z1'], type: 'heatmap'}];\n    dereference(container, {z1: [1, 2, 3]});\n\n    // contents should have been transposed\n    expect(Array.isArray(container[0].z[0])).toBe(true);\n    expect(Array.isArray(container[0].z[1])).toBe(true);\n    expect(Array.isArray(container[0].z[2])).toBe(true);\n\n    expect(container[0].z[0][0]).toBe(1);\n    expect(container[0].z[1][0]).toBe(2);\n    expect(container[0].z[2][0]).toBe(3);\n  });\n\n  it('uses custom function if provided in config', () => {\n    const customParsing = (src) => src.split(',');\n    const container = [{zsrc: 'z1,z2', type: 'heatmap'}];\n    dereference(container, {z1: [1, 2, 3], z2: [2, 2, 2]}, {toSrc: customParsing});\n\n    // contents should have been transposed\n    expect(Array.isArray(container[0].z[0])).toBe(true);\n    expect(Array.isArray(container[0].z[1])).toBe(true);\n    expect(Array.isArray(container[0].z[2])).toBe(true);\n\n    expect(container[0].z[0][0]).toBe(1);\n    expect(container[0].z[0][1]).toBe(2);\n    expect(container[0].z[1][0]).toBe(2);\n    expect(container[0].z[1][1]).toBe(2);\n    expect(container[0].z[2][0]).toBe(3);\n    expect(container[0].z[2][1]).toBe(2);\n  });\n\n  // TO DO: dereference all of layout\n  it('can dereference top level layout keys', () => {\n    const container = {metasrc: 'x1', xaxis: {ticktext: 'x2'}};\n    dereference(container, {x1: ['yes!'], x2: ['some', 'text']});\n\n    expect(Array.isArray(container.meta)).toBe(true);\n    expect(container.meta[0]).toBe('yes!');\n  });\n});\n"],"mappings":"aAAA,IAAAA,YAAA,CAAAC,sBAAA,CAAAC,OAAA,oBAAyC,SAAAD,uBAAAE,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,MAAAG,aAAA,QAAAC,oBAAA,eAAAA,oBAAA,CAAAF,OAAA,CAAAG,SAAA,UAAAC,CAAA,SAAAA,CAAA,EAGzCC,QAAQ,CAAC,aAAa,CAAE,IAAM,CAC5BC,EAAE,CAAC,kCAAkC,CAAE,IAAM,CAC3C,KAAM,CAAAC,SAAS,CAAG,CAAC,CAACC,CAAC,CAAE,CAAC,CAACC,IAAI,CAAE,IAAI,CAAC,CAAC,CAAEC,IAAI,CAAE,IAAI,CAAC,CAAC,CACnD,GAAAC,oBAAW,EAACJ,SAAS,CAAE,CAACK,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAEvCC,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACC,CAAC,CAAC,CAAC,CAAC,CAACA,CAAC,CAAC,CAACM,aAAa,CAAC,CAAC,CAC3CD,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACU,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CACjD,CAAC,CAAC,CAEFZ,EAAE,CAAC,qCAAqC,CAAE,IAAM,CAC9C,KAAM,CAAAC,SAAS,CAAG,CAAC,CAACY,UAAU,CAAE,CAAC,CAACV,IAAI,CAAE,IAAI,CAAC,CAAC,CAAEC,IAAI,CAAE,IAAI,CAAC,CAAC,CAC5D,GAAAC,oBAAW,EAACJ,SAAS,CAAE,CAACK,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAEvCC,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACY,UAAU,CAAC,CAAC,CAAC,CAACX,CAAC,CAAC,CAAC,CAACU,IAAI,CAAC,IAAI,CAAC,CAC9DL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACU,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CACjD,CAAC,CAAC,CAEFZ,EAAE,CAAC,yCAAyC,CAAE,IAAM,CAClD,KAAM,CAAAC,SAAS,CAAG,CAAC,CAACa,IAAI,CAAE,CAAC,IAAI,CAAE,IAAI,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAC,CAAC,CACzD,GAAAV,oBAAW,EAACJ,SAAS,CAAE,CAACe,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAEC,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAGtDV,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CAEnDL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CACrC,CAAC,CAAC,CAEFZ,EAAE,CAAC,qCAAqC,CAAE,IAAM,CAC9C,KAAM,CAAAC,SAAS,CAAG,CAAC,CAACa,IAAI,CAAE,CAAC,IAAI,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAC,CAAC,CACnD,GAAAV,oBAAW,EAACJ,SAAS,CAAE,CAACe,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAGvCT,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CAEnDL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CACrC,CAAC,CAAC,CAEFZ,EAAE,CAAC,4CAA4C,CAAE,IAAM,CACrD,KAAM,CAAAmB,aAAa,CAAIC,GAAG,EAAKA,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAC7C,KAAM,CAAApB,SAAS,CAAG,CAAC,CAACa,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,SAAS,CAAC,CAAC,CACpD,GAAAV,oBAAW,EAACJ,SAAS,CAAE,CAACe,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAEC,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAC,CAAE,CAACK,KAAK,CAAEH,aAAa,CAAC,CAAC,CAG9EZ,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CACnDL,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC,CAEnDL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC,CACpCL,MAAM,CAACN,SAAS,CAAC,CAAC,CAAC,CAACiB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACN,IAAI,CAAC,CAAC,CACrC,CAAC,CAAC,CAGFZ,EAAE,CAAC,uCAAuC,CAAE,IAAM,CAChD,KAAM,CAAAC,SAAS,CAAG,CAACsB,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,CAACC,QAAQ,CAAE,IAAI,CAAC,CAAC,CAC1D,GAAApB,oBAAW,EAACJ,SAAS,CAAE,CAACK,EAAE,CAAE,CAAC,MAAM,CAAC,CAAEoB,EAAE,CAAE,CAAC,MAAM,CAAE,MAAM,CAAC,CAAC,CAAC,CAE5DnB,MAAM,CAACE,KAAK,CAACC,OAAO,CAACT,SAAS,CAAC0B,IAAI,CAAC,CAAC,CAACf,IAAI,CAAC,IAAI,CAAC,CAChDL,MAAM,CAACN,SAAS,CAAC0B,IAAI,CAAC,CAAC,CAAC,CAAC,CAACf,IAAI,CAAC,MAAM,CACvC,CAAC,CACH,CAAC,CAAC","ignoreList":[]}