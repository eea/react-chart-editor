{"version":3,"file":"dataSources.js","names":["_nested_property","_interopRequireDefault","require","_lib","e","__esModule","default","enterModule","reactHotLoaderGlobal","undefined","module","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","return","isArray","__signature__","signature","getAttrsPath","container","allowedAttributes","srcAttributes","recursiveSearch","path","arguments","entries","forEach","_ref","_ref2","key","newPath","concat","includes","getSrcAttr","attr","srcConverters","srcProperty","nestedProperty","get","toSrc","type","getData","trace","srcAttr","dataSources","data","srcAttrValue","filter","v","map","maybeTransposeData","inSrcAttr","indexOf","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/dataSources.js"],"sourcesContent":["import nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {maybeTransposeData} from '.';\n\nexport function getAttrsPath(container, allowedAttributes) {\n  const srcAttributes = {};\n\n  function recursiveSearch(container, path = '') {\n    Object.entries(container).forEach(([key, value]) => {\n      const newPath = path ? `${path}.${key}` : key;\n\n      if (allowedAttributes.includes(newPath) && Array.isArray(value)) {\n        srcAttributes[newPath] = value;\n      }\n\n      if (value && typeof value === 'object' && !Array.isArray(value)) {\n        recursiveSearch(value, newPath);\n      }\n    });\n  }\n\n  recursiveSearch(container);\n  return srcAttributes;\n}\n\nexport function getSrcAttr(container, attr, srcConverters) {\n  const key = attr + 'src';\n  const srcProperty = nestedProperty(container, key).get();\n  const value = srcConverters ? srcConverters.toSrc(srcProperty, container?.type) : srcProperty;\n\n  return {\n    key,\n    value,\n    attr,\n  };\n}\n\nexport function getData(trace, srcAttr, dataSources) {\n  let data;\n  const srcAttrValue =\n    Array.isArray(srcAttr.value) &&\n    srcAttr.value.length === 1 &&\n    (srcAttr.attr === 'x' || srcAttr.attr === 'y')\n      ? srcAttr.value[0]\n      : srcAttr.value;\n\n  if (Array.isArray(srcAttrValue)) {\n    data = srcAttrValue.filter((v) => Array.isArray(dataSources[v])).map((v) => dataSources[v]);\n  } else {\n    data = dataSources[srcAttrValue] || null;\n  }\n  return maybeTransposeData(data, srcAttr.key, trace.type);\n}\n\nexport function inSrcAttr(srcAttr, value) {\n  if (Array.isArray(srcAttr.value) && srcAttr.value.indexOf(value) > -1) {\n    return true;\n  }\n  if (typeof srcAttr.value === 'string' && srcAttr.value === value) {\n    return true;\n  }\n  return false;\n}\n"],"mappings":"0LAAA,IAAAA,gBAAA,CAAAC,sBAAA,CAAAC,OAAA,uCACA,IAAAC,IAAA,CAAAD,OAAA,cAAqC,SAAAD,uBAAAG,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,kBAAAG,WAAA,QAAAC,oBAAA,eAAAA,oBAAA,CAAAD,WAAA,CAAAE,SAAA,CAAAF,WAAA,EAAAA,WAAA,CAAAG,MAAA,eAAAC,eAAAC,CAAA,CAAAR,CAAA,SAAAS,eAAA,CAAAD,CAAA,GAAAE,qBAAA,CAAAF,CAAA,CAAAR,CAAA,GAAAW,2BAAA,CAAAH,CAAA,CAAAR,CAAA,GAAAY,gBAAA,YAAAA,iBAAA,YAAAC,SAAA,uJAAAF,4BAAAH,CAAA,CAAAM,CAAA,KAAAN,CAAA,sBAAAA,CAAA,QAAAO,iBAAA,CAAAP,CAAA,CAAAM,CAAA,MAAAE,CAAA,IAAAC,QAAA,CAAAC,IAAA,CAAAV,CAAA,EAAAW,KAAA,wBAAAH,CAAA,EAAAR,CAAA,CAAAY,WAAA,GAAAJ,CAAA,CAAAR,CAAA,CAAAY,WAAA,CAAAC,IAAA,UAAAL,CAAA,UAAAA,CAAA,CAAAM,KAAA,CAAAC,IAAA,CAAAf,CAAA,gBAAAQ,CAAA,6CAAAQ,IAAA,CAAAR,CAAA,EAAAD,iBAAA,CAAAP,CAAA,CAAAM,CAAA,mBAAAC,kBAAAP,CAAA,CAAAM,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAN,CAAA,CAAAiB,MAAA,IAAAX,CAAA,CAAAN,CAAA,CAAAiB,MAAA,UAAAzB,CAAA,GAAA0B,CAAA,CAAAJ,KAAA,CAAAR,CAAA,EAAAd,CAAA,CAAAc,CAAA,CAAAd,CAAA,GAAA0B,CAAA,CAAA1B,CAAA,EAAAQ,CAAA,CAAAR,CAAA,SAAA0B,CAAA,UAAAhB,sBAAAF,CAAA,CAAAmB,CAAA,MAAAX,CAAA,OAAAR,CAAA,0BAAAoB,MAAA,EAAApB,CAAA,CAAAoB,MAAA,CAAAC,QAAA,GAAArB,CAAA,wBAAAQ,CAAA,MAAAhB,CAAA,CAAA0B,CAAA,CAAAI,CAAA,CAAAC,CAAA,CAAAjB,CAAA,IAAAkB,CAAA,IAAAC,CAAA,WAAAH,CAAA,EAAAd,CAAA,CAAAA,CAAA,CAAAE,IAAA,CAAAV,CAAA,GAAA0B,IAAA,KAAAP,CAAA,KAAAQ,MAAA,CAAAnB,CAAA,IAAAA,CAAA,QAAAgB,CAAA,gBAAAA,CAAA,EAAAhC,CAAA,CAAA8B,CAAA,CAAAZ,IAAA,CAAAF,CAAA,GAAAoB,IAAA,IAAAtB,CAAA,CAAAuB,IAAA,CAAArC,CAAA,CAAAsC,KAAA,EAAAxB,CAAA,CAAAW,MAAA,GAAAE,CAAA,EAAAK,CAAA,YAAAxB,CAAA,EAAAyB,CAAA,IAAAP,CAAA,CAAAlB,CAAA,iBAAAwB,CAAA,QAAAhB,CAAA,CAAAuB,MAAA,GAAAR,CAAA,CAAAf,CAAA,CAAAuB,MAAA,GAAAJ,MAAA,CAAAJ,CAAA,IAAAA,CAAA,oBAAAE,CAAA,OAAAP,CAAA,SAAAZ,CAAA,WAAAL,gBAAAD,CAAA,KAAAc,KAAA,CAAAkB,OAAA,CAAAhC,CAAA,SAAAA,CAAA,KAAAiC,aAAA,QAAArC,oBAAA,eAAAA,oBAAA,CAAAF,OAAA,CAAAwC,SAAA,UAAA5B,CAAA,SAAAA,CAAA,EAE9B,QAAS,CAAA6B,YAAYA,CAACC,SAAS,CAAEC,iBAAiB,CAAE,CACzD,GAAM,CAAAC,aAAa,CAAG,CAAC,CAAC,CAExB,QAAS,CAAAC,eAAeA,CAACH,SAAS,CAAa,IAAX,CAAAI,IAAI,CAAAC,SAAA,CAAAxB,MAAA,IAAAwB,SAAA,MAAA5C,SAAA,CAAA4C,SAAA,IAAG,EAAE,CAC3Cd,MAAM,CAACe,OAAO,CAACN,SAAS,CAAC,CAACO,OAAO,CAACC,IAAA,EAAkB,KAAAC,KAAA,CAAA9C,cAAA,CAAA6C,IAAA,IAAhBE,GAAG,CAAAD,KAAA,IAAEf,KAAK,CAAAe,KAAA,IAC5C,GAAM,CAAAE,OAAO,CAAGP,IAAI,IAAAQ,MAAA,CAAMR,IAAI,MAAAQ,MAAA,CAAIF,GAAG,EAAKA,GAAG,CAE7C,GAAIT,iBAAiB,CAACY,QAAQ,CAACF,OAAO,CAAC,EAAIjC,KAAK,CAACkB,OAAO,CAACF,KAAK,CAAC,CAAE,CAC/DQ,aAAa,CAACS,OAAO,CAAC,CAAGjB,KAC3B,CAEA,GAAIA,KAAK,EAAI,MAAO,CAAAA,KAAK,GAAK,QAAQ,EAAI,CAAChB,KAAK,CAACkB,OAAO,CAACF,KAAK,CAAC,CAAE,CAC/DS,eAAe,CAACT,KAAK,CAAEiB,OAAO,CAChC,CACF,CAAC,CACH,CAEAR,eAAe,CAACH,SAAS,CAAC,CAC1B,MAAO,CAAAE,aACT,CAEO,QAAS,CAAAY,UAAUA,CAACd,SAAS,CAAEe,IAAI,CAAEC,aAAa,CAAE,CACzD,GAAM,CAAAN,GAAG,CAAGK,IAAI,CAAG,KAAK,CACxB,GAAM,CAAAE,WAAW,CAAG,GAAAC,wBAAc,EAAClB,SAAS,CAAEU,GAAG,CAAC,CAACS,GAAG,CAAC,CAAC,CACxD,GAAM,CAAAzB,KAAK,CAAGsB,aAAa,CAAGA,aAAa,CAACI,KAAK,CAACH,WAAW,CAAEjB,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEqB,IAAI,CAAC,CAAGJ,WAAW,CAE7F,MAAO,CACLP,GAAG,CACHhB,KAAK,CACLqB,IACF,CACF,CAEO,QAAS,CAAAO,OAAOA,CAACC,KAAK,CAAEC,OAAO,CAAEC,WAAW,CAAE,CACnD,GAAI,CAAAC,IAAI,CACR,GAAM,CAAAC,YAAY,CAChBjD,KAAK,CAACkB,OAAO,CAAC4B,OAAO,CAAC9B,KAAK,CAAC,EAC5B8B,OAAO,CAAC9B,KAAK,CAACb,MAAM,GAAK,CAAC,GACzB2C,OAAO,CAACT,IAAI,GAAK,GAAG,EAAIS,OAAO,CAACT,IAAI,GAAK,GAAG,CAAC,CAC1CS,OAAO,CAAC9B,KAAK,CAAC,CAAC,CAAC,CAChB8B,OAAO,CAAC9B,KAAK,CAEnB,GAAIhB,KAAK,CAACkB,OAAO,CAAC+B,YAAY,CAAC,CAAE,CAC/BD,IAAI,CAAGC,YAAY,CAACC,MAAM,CAAEC,CAAC,EAAKnD,KAAK,CAACkB,OAAO,CAAC6B,WAAW,CAACI,CAAC,CAAC,CAAC,CAAC,CAACC,GAAG,CAAED,CAAC,EAAKJ,WAAW,CAACI,CAAC,CAAC,CAC5F,CAAC,IAAM,CACLH,IAAI,CAAGD,WAAW,CAACE,YAAY,CAAC,EAAI,IACtC,CACA,MAAO,GAAAI,uBAAkB,EAACL,IAAI,CAAEF,OAAO,CAACd,GAAG,CAAEa,KAAK,CAACF,IAAI,CACzD,CAEO,QAAS,CAAAW,SAASA,CAACR,OAAO,CAAE9B,KAAK,CAAE,CACxC,GAAIhB,KAAK,CAACkB,OAAO,CAAC4B,OAAO,CAAC9B,KAAK,CAAC,EAAI8B,OAAO,CAAC9B,KAAK,CAACuC,OAAO,CAACvC,KAAK,CAAC,CAAG,CAAC,CAAC,CAAE,CACrE,MAAO,KACT,CACA,GAAI,MAAO,CAAA8B,OAAO,CAAC9B,KAAK,GAAK,QAAQ,EAAI8B,OAAO,CAAC9B,KAAK,GAAKA,KAAK,CAAE,CAChE,MAAO,KACT,CACA,MAAO,MACT,CAAC,iBAAAwC,cAAA,QAAA1E,oBAAA,eAAAA,oBAAA,CAAAF,OAAA,CAAAG,SAAA,KAAAyE,cAAA,SAAAA,cAAA,CAAAC,QAAA,CA1DepC,YAAY,gFAAAmC,cAAA,CAAAC,QAAA,CAqBZrB,UAAU,8EAAAoB,cAAA,CAAAC,QAAA,CAYVb,OAAO,2EAAAY,cAAA,CAAAC,QAAA,CAiBPH,SAAS,kGAAAI,WAAA,QAAA5E,oBAAA,eAAAA,oBAAA,CAAA4E,WAAA,CAAA3E,SAAA,CAAA2E,WAAA,EAAAA,WAAA,CAAA1E,MAAA","ignoreList":[]}