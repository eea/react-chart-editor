{"version":3,"file":"dataSources.js","names":["_nested_property","_interopRequireDefault","require","_","e","__esModule","default","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","n","l","iterator","u","f","next","done","return","isArray","__signature__","signature","getAttrsPath","container","allowedAttributes","srcAttributes","recursiveSearch","path","index","concat","entries","_ref","_ref2","key","newPath","includes","replace","getSrcAttr","attr","srcConverters","srcProperty","nestedProperty","get","toSrc","type","originalValue","getAdjustedSrcAttr","srcAttr","getData","dataSources","data","srcAttrValue","v","map","maybeTransposeData","inSrcAttr","indexOf","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/dataSources.js"],"sourcesContent":["import nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {maybeTransposeData} from 'lib';\n\nexport function getAttrsPath(container, allowedAttributes) {\n  const srcAttributes = {};\n\n  function recursiveSearch(container, path = '') {\n    if (!container || typeof container !== 'object') {\n      return;\n    }\n\n    if (Array.isArray(container)) {\n      container.forEach((value, index) => {\n        recursiveSearch(value, `${path}[${index}]`);\n      });\n      return;\n    }\n\n    Object.entries(container).forEach(([key, value]) => {\n      const newPath = path ? `${path}.${key}` : key;\n\n      if (allowedAttributes.includes(newPath.replace(/\\[\\d+\\]/g, '[]')) && Array.isArray(value)) {\n        srcAttributes[newPath] = value;\n      }\n\n      recursiveSearch(value, newPath);\n    });\n  }\n\n  recursiveSearch(container);\n  return srcAttributes;\n}\n\nexport function getSrcAttr(container, attr, srcConverters) {\n  const key = attr + 'src';\n  const srcProperty = nestedProperty(container, key).get();\n  const value = srcConverters ? srcConverters.toSrc(srcProperty, container?.type) : srcProperty;\n\n  return {\n    key,\n    value,\n    originalValue: value,\n    attr,\n  };\n}\n\nexport function getAdjustedSrcAttr(srcAttr) {\n  return Array.isArray(srcAttr.value) && srcAttr.value.length === 1\n    ? {...srcAttr, value: srcAttr.value[0]}\n    : srcAttr;\n}\n\nexport function getData(container, srcAttr, dataSources) {\n  let data;\n  const srcAttrValue =\n    Array.isArray(srcAttr.value) &&\n    srcAttr.value.length === 1 &&\n    (srcAttr.attr === 'x' || srcAttr.attr === 'y')\n      ? srcAttr.value[0]\n      : srcAttr.value;\n\n  if (Array.isArray(srcAttrValue)) {\n    data = srcAttrValue.filter((v) => Array.isArray(dataSources[v])).map((v) => dataSources[v]);\n  } else {\n    data = dataSources[srcAttrValue] || null;\n  }\n  return maybeTransposeData(data, srcAttr.key, container.type);\n}\n\nexport function inSrcAttr(srcAttr, value) {\n  if (Array.isArray(srcAttr.value) && srcAttr.value.indexOf(value) > -1) {\n    return true;\n  }\n  if (typeof srcAttr.value === 'string' && srcAttr.value === value) {\n    return true;\n  }\n  return false;\n}\n"],"mappings":"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","ignoreList":[]}