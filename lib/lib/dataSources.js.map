{"version":3,"file":"dataSources.js","names":["_nested_property","_interopRequireDefault","require","_","e","__esModule","default","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","__signature__","signature","a","getAttrsPath","container","allowedAttributes","srcAttributes","recursiveSearch","path","Array","isArray","index","concat","entries","_ref","key","newPath","includes","replace","getSrcAttr","attr","srcConverters","srcProperty","nestedProperty","get","toSrc","type","originalValue","getAdjustedSrcAttr","srcAttr","getData","dataSources","data","srcAttrValue","v","map","maybeTransposeData","inSrcAttr","indexOf","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/dataSources.js"],"sourcesContent":["import nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {maybeTransposeData} from 'lib';\n\nexport function getAttrsPath(container, allowedAttributes) {\n  const srcAttributes = {};\n\n  function recursiveSearch(container, path = '') {\n    if (!container || typeof container !== 'object') {\n      return;\n    }\n\n    if (Array.isArray(container)) {\n      container.forEach((value, index) => {\n        recursiveSearch(value, `${path}[${index}]`);\n      });\n      return;\n    }\n\n    Object.entries(container).forEach(([key, value]) => {\n      const newPath = path ? `${path}.${key}` : key;\n\n      if (allowedAttributes.includes(newPath.replace(/\\[\\d+\\]/g, '[]')) && Array.isArray(value)) {\n        srcAttributes[newPath] = value;\n      }\n\n      recursiveSearch(value, newPath);\n    });\n  }\n\n  recursiveSearch(container);\n  return srcAttributes;\n}\n\nexport function getSrcAttr(container, attr, srcConverters) {\n  const key = attr + 'src';\n  const srcProperty = nestedProperty(container, key).get();\n  const value = srcConverters ? srcConverters.toSrc(srcProperty, container?.type) : srcProperty;\n\n  return {\n    key,\n    value,\n    originalValue: value,\n    attr,\n  };\n}\n\nexport function getAdjustedSrcAttr(srcAttr) {\n  return Array.isArray(srcAttr.value) && srcAttr.value.length === 1\n    ? {...srcAttr, value: srcAttr.value[0] || null}\n    : srcAttr;\n}\n\nexport function getData(container, srcAttr, dataSources) {\n  let data;\n  const srcAttrValue =\n    Array.isArray(srcAttr.value) &&\n    srcAttr.value.length === 1 &&\n    (srcAttr.attr === 'x' || srcAttr.attr === 'y')\n      ? srcAttr.value[0]\n      : srcAttr.value;\n\n  if (Array.isArray(srcAttrValue)) {\n    data = srcAttrValue.filter((v) => Array.isArray(dataSources[v])).map((v) => dataSources[v]);\n  } else {\n    data = dataSources[srcAttrValue] || null;\n  }\n  return maybeTransposeData(data, srcAttr.key, container.type);\n}\n\nexport function inSrcAttr(srcAttr, value) {\n  if (Array.isArray(srcAttr.value) && srcAttr.value.indexOf(value) > -1) {\n    return true;\n  }\n  if (typeof srcAttr.value === 'string' && srcAttr.value === value) {\n    return true;\n  }\n  return false;\n}\n"],"mappings":"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","ignoreList":[]}