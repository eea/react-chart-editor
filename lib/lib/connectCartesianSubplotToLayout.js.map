{"version":3,"file":"connectCartesianSubplotToLayout.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","__signature__","signature","connectCartesianSubplotToLayout","WrappedComponent","SubplotConnectedComponent","Component","constructor","props","context","updateSubplot","setLocals","UNSAFE_componentWillReceiveProps","nextProps","nextContext","xaxis","yaxis","traceIndexes","container","fullContainer","data","trace","fullTrace","getFullTrace","icon","renderTraceIcon","plotlyTraceToCustomTrace","name","getChildContext","getValObject","attr","replace","updateContainer","deleteContainer","deleteSubplot","update","newUpdate","key","newKey","render","createElement","__reactstandin__regenerateByEval","code","eval","displayName","concat","getDisplayName","propTypes","PropTypes","string","isRequired","contextTypes","object","array","fullData","onUpdate","func","childContextTypes","plotly_editor_traits","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/connectCartesianSubplotToLayout.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName, plotlyTraceToCustomTrace, renderTraceIcon, getFullTrace} from '../lib';\n\nexport default function connectCartesianSubplotToLayout(WrappedComponent) {\n  class SubplotConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n\n      this.updateSubplot = this.updateSubplot.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {xaxis, yaxis, traceIndexes} = props;\n      const {container, fullContainer, data} = context;\n\n      this.container = {\n        xaxis: container[xaxis],\n        yaxis: container[yaxis],\n      };\n      this.fullContainer = {\n        xaxis: fullContainer[xaxis],\n        yaxis: fullContainer[yaxis],\n      };\n\n      const trace = traceIndexes.length > 0 ? data[traceIndexes[0]] : {};\n      const fullTrace = getFullTrace(props, context);\n\n      if (trace && fullTrace) {\n        this.icon = renderTraceIcon(plotlyTraceToCustomTrace(trace));\n        this.name = fullTrace.name;\n      }\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject\n            ? null\n            : this.context.getValObject(\n                attr.replace('xaxis', this.props.xaxis).replace('yaxis', this.props.yaxis)\n              ),\n        updateContainer: this.updateSubplot,\n        deleteContainer: this.deleteSubplot,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateSubplot(update) {\n      const newUpdate = {};\n      for (const key in update) {\n        const newKey = key.replace('xaxis', this.props.xaxis).replace('yaxis', this.props.yaxis);\n        newUpdate[newKey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent name={this.name} icon={this.icon} {...this.props} />;\n    }\n  }\n\n  SubplotConnectedComponent.displayName = `SubplotConnected${getDisplayName(WrappedComponent)}`;\n\n  SubplotConnectedComponent.propTypes = {\n    xaxis: PropTypes.string.isRequired,\n    yaxis: PropTypes.string.isRequired,\n  };\n\n  SubplotConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    data: PropTypes.array,\n    fullData: PropTypes.array,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  SubplotConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    deleteContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  SubplotConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return SubplotConnectedComponent;\n}\n"],"mappings":"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","ignoreList":[]}