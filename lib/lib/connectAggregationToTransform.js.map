{"version":3,"file":"connectAggregationToTransform.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","connectAggregationToTransform","WrappedComponent","AggregationConnectedComponent","Component","constructor","props","context","updateAggregation","bind","setLocals","UNSAFE_componentWillReceiveProps","nextProps","nextContext","aggregationIndex","container","fullContainer","aggregations","fullAggregations","getChildContext","getValObject","attr","concat","updateContainer","update","newUpdate","path","key","target","render","createElement","__reactstandin__regenerateByEval","code","eval","displayName","getDisplayName","propTypes","PropTypes","number","isRequired","contextTypes","object","data","array","onUpdate","func","childContextTypes","deleteContainer","plotly_editor_traits","reactHotLoader","register","leaveModule"],"sources":["../../src/lib/connectAggregationToTransform.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\n\nexport default function connectAggregationToTransform(WrappedComponent) {\n  class AggregationConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n\n      this.updateAggregation = this.updateAggregation.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {aggregationIndex} = props;\n      const {container, fullContainer} = context;\n\n      const aggregations = (container && container.aggregations) || [];\n      const fullAggregations = fullContainer.aggregations || [];\n      this.container = aggregations[aggregationIndex];\n      this.fullContainer = fullAggregations[aggregationIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject ? null : this.context.getValObject(`aggregations[].${attr}`),\n        updateContainer: this.updateAggregation,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateAggregation(update) {\n      const newUpdate = {};\n      const path = `aggregations[${this.props.aggregationIndex}]`;\n      for (const key in update) {\n        newUpdate[`${path}.${key}`] = update[key];\n      }\n      newUpdate[`${path}.target`] = this.fullContainer.target;\n      newUpdate[`${path}.enabled`] = true;\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  AggregationConnectedComponent.displayName = `AggregationConnected${getDisplayName(\n    WrappedComponent\n  )}`;\n\n  AggregationConnectedComponent.propTypes = {\n    aggregationIndex: PropTypes.number.isRequired,\n  };\n\n  AggregationConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    data: PropTypes.array,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  AggregationConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    deleteContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  AggregationConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return AggregationConnectedComponent;\n}\n"],"mappings":"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","ignoreList":[]}