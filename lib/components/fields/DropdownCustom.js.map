{"version":3,"file":"DropdownCustom.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","_constants","_Field","_Dropdown","_Text","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","__signature__","signature","UnconnectedDropdownCustom","Component","constructor","props","context","setValue","bind","setLocals","state","custom","customOpt","options","map","includes","UNSAFE_componentWillReceiveProps","fullValue","MULTI_VALUED_PLACEHOLDER","defaultOpt","setState","updateContainer","attr","render","createElement","backgroundDark","onChange","clearable","components","placeholder","updatePlot","__reactstandin__regenerateByEval","key","code","eval","exports","propTypes","PropTypes","bool","any","func","object","oneOfType","number","string","label","Field","contextTypes","displayName","_default","connectToContainer","_default2","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/fields/DropdownCustom.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connectToContainer} from 'lib';\nimport {MULTI_VALUED_PLACEHOLDER} from 'lib/constants';\nimport Field from './Field';\nimport DropdownWidget from '../widgets/Dropdown';\nimport Text from './Text';\n\nexport class UnconnectedDropdownCustom extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.setValue = this.setValue.bind(this);\n    this.setLocals = this.setLocals.bind(this);\n\n    this.setLocals(props);\n\n    this.state = {\n      custom:\n        this.value === props.customOpt ||\n        !this.props.options.map((o) => o.value).includes(this.value),\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    this.setLocals(props);\n  }\n\n  setLocals(props) {\n    this.value =\n      props.fullValue === undefined || props.fullValue === MULTI_VALUED_PLACEHOLDER // eslint-disable-line no-undefined\n        ? this.props.defaultOpt\n        : props.fullValue;\n  }\n\n  setValue(value, custom = false) {\n    this.value = value;\n    const customOpt = this.props.customOpt;\n    this.setState({\n      custom: (custom || value === customOpt) && value !== '',\n    });\n    this.props.updateContainer({\n      [this.props.attr]: value === customOpt && !custom ? customOpt : value,\n    });\n  }\n\n  render() {\n    const {options, attr, customOpt} = this.props;\n    const value =\n      (this.value === '' || !options.map((o) => o.value).includes(this.value)) && this.state.custom\n        ? customOpt\n        : this.value;\n\n    return (\n      <Field {...this.props}>\n        <DropdownWidget\n          backgroundDark={this.props.backgroundDark}\n          options={options}\n          value={value}\n          onChange={this.setValue}\n          clearable={this.props.clearable}\n          components={this.props.components}\n          placeholder={this.props.placeholder}\n        />\n\n        {this.state.custom && (\n          <Text\n            attr={attr}\n            updatePlot={(value) => this.setValue(value, true)}\n            onChange={(value) => {\n              if (value) {\n                this.setValue(value, true);\n              }\n            }}\n          />\n        )}\n      </Field>\n    );\n  }\n}\n\nUnconnectedDropdownCustom.propTypes = {\n  backgroundDark: PropTypes.bool,\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  clearable: PropTypes.bool,\n  components: PropTypes.object,\n  placeholder: PropTypes.any,\n  defaultOpt: PropTypes.oneOfType([PropTypes.number, PropTypes.bool, PropTypes.string]),\n  customOpt: PropTypes.oneOfType([PropTypes.number, PropTypes.bool, PropTypes.string]),\n  label: PropTypes.string,\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedDropdownCustom.contextTypes = {\n  updateContainer: PropTypes.func,\n};\n\nUnconnectedDropdownCustom.displayName = 'UnconnectedDropdownCustom';\n\nexport default connectToContainer(UnconnectedDropdownCustom);\n"],"mappings":"+HAAA,IAAAA,MAAA,CAAAC,uBAAA,CAAAC,OAAA,WACA,IAAAC,UAAA,CAAAC,sBAAA,CAAAF,OAAA,gBACA,IAAAG,IAAA,CAAAH,OAAA,cACA,IAAAI,UAAA,CAAAJ,OAAA,wBACA,IAAAK,MAAA,CAAAH,sBAAA,CAAAF,OAAA,aACA,IAAAM,SAAA,CAAAJ,sBAAA,CAAAF,OAAA,yBACA,IAAAO,KAAA,CAAAL,sBAAA,CAAAF,OAAA,YAA0B,SAAAE,uBAAAM,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,WAAAG,yBAAAH,CAAA,wBAAAI,OAAA,iBAAAC,CAAA,KAAAD,OAAA,CAAAE,CAAA,KAAAF,OAAA,QAAAD,wBAAA,UAAAA,yBAAAH,CAAA,SAAAA,CAAA,CAAAM,CAAA,CAAAD,CAAA,GAAAL,CAAA,WAAAT,wBAAAS,CAAA,CAAAK,CAAA,MAAAA,CAAA,EAAAL,CAAA,EAAAA,CAAA,CAAAC,UAAA,QAAAD,CAAA,WAAAA,CAAA,mBAAAA,CAAA,qBAAAA,CAAA,QAAAE,OAAA,CAAAF,CAAA,MAAAM,CAAA,CAAAH,wBAAA,CAAAE,CAAA,KAAAC,CAAA,EAAAA,CAAA,CAAAC,GAAA,CAAAP,CAAA,SAAAM,CAAA,CAAAE,GAAA,CAAAR,CAAA,MAAAS,CAAA,EAAAC,SAAA,OAAAC,CAAA,CAAAC,MAAA,CAAAC,cAAA,EAAAD,MAAA,CAAAE,wBAAA,SAAAC,CAAA,IAAAf,CAAA,gBAAAe,CAAA,KAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,CAAAe,CAAA,OAAAG,CAAA,CAAAP,CAAA,CAAAC,MAAA,CAAAE,wBAAA,CAAAd,CAAA,CAAAe,CAAA,OAAAG,CAAA,GAAAA,CAAA,CAAAV,GAAA,EAAAU,CAAA,CAAAC,GAAA,EAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,CAAAM,CAAA,CAAAG,CAAA,EAAAT,CAAA,CAAAM,CAAA,EAAAf,CAAA,CAAAe,CAAA,SAAAN,CAAA,CAAAP,OAAA,CAAAF,CAAA,CAAAM,CAAA,EAAAA,CAAA,CAAAa,GAAA,CAAAnB,CAAA,CAAAS,CAAA,EAAAA,CAAA,iBAAAW,WAAA,QAAAC,oBAAA,eAAAA,oBAAA,CAAAD,WAAA,CAAAE,SAAA,CAAAF,WAAA,EAAAA,WAAA,CAAAG,MAAA,eAAAC,QAAAxB,CAAA,CAAAK,CAAA,MAAAC,CAAA,CAAAM,MAAA,CAAAa,IAAA,CAAAzB,CAAA,KAAAY,MAAA,CAAAc,qBAAA,MAAAC,CAAA,CAAAf,MAAA,CAAAc,qBAAA,CAAA1B,CAAA,EAAAK,CAAA,GAAAsB,CAAA,CAAAA,CAAA,CAAAC,MAAA,UAAAvB,CAAA,SAAAO,MAAA,CAAAE,wBAAA,CAAAd,CAAA,CAAAK,CAAA,EAAAwB,UAAA,IAAAvB,CAAA,CAAAwB,IAAA,CAAAC,KAAA,CAAAzB,CAAA,CAAAqB,CAAA,SAAArB,CAAA,UAAA0B,cAAAhC,CAAA,UAAAK,CAAA,GAAAA,CAAA,CAAA4B,SAAA,CAAAC,MAAA,CAAA7B,CAAA,QAAAC,CAAA,OAAA2B,SAAA,CAAA5B,CAAA,EAAA4B,SAAA,CAAA5B,CAAA,KAAAA,CAAA,GAAAmB,OAAA,CAAAZ,MAAA,CAAAN,CAAA,MAAA6B,OAAA,UAAA9B,CAAA,EAAA+B,eAAA,CAAApC,CAAA,CAAAK,CAAA,CAAAC,CAAA,CAAAD,CAAA,KAAAO,MAAA,CAAAyB,yBAAA,CAAAzB,MAAA,CAAA0B,gBAAA,CAAAtC,CAAA,CAAAY,MAAA,CAAAyB,yBAAA,CAAA/B,CAAA,GAAAkB,OAAA,CAAAZ,MAAA,CAAAN,CAAA,GAAA6B,OAAA,UAAA9B,CAAA,EAAAO,MAAA,CAAAC,cAAA,CAAAb,CAAA,CAAAK,CAAA,CAAAO,MAAA,CAAAE,wBAAA,CAAAR,CAAA,CAAAD,CAAA,YAAAL,CAAA,UAAAoC,gBAAApC,CAAA,CAAAK,CAAA,CAAAC,CAAA,SAAAD,CAAA,CAAAkC,cAAA,CAAAlC,CAAA,KAAAL,CAAA,CAAAY,MAAA,CAAAC,cAAA,CAAAb,CAAA,CAAAK,CAAA,EAAAmC,KAAA,CAAAlC,CAAA,CAAAuB,UAAA,IAAAY,YAAA,IAAAC,QAAA,MAAA1C,CAAA,CAAAK,CAAA,EAAAC,CAAA,CAAAN,CAAA,UAAAuC,eAAAjC,CAAA,MAAAY,CAAA,CAAAyB,YAAA,CAAArC,CAAA,kCAAAY,CAAA,CAAAA,CAAA,CAAAA,CAAA,aAAAyB,aAAArC,CAAA,CAAAD,CAAA,sBAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,KAAAN,CAAA,CAAAM,CAAA,CAAAsC,MAAA,CAAAC,WAAA,cAAA7C,CAAA,MAAAkB,CAAA,CAAAlB,CAAA,CAAAiB,IAAA,CAAAX,CAAA,CAAAD,CAAA,iCAAAa,CAAA,QAAAA,CAAA,WAAA4B,SAAA,mEAAAzC,CAAA,CAAA0C,MAAA,CAAAC,MAAA,EAAA1C,CAAA,MAAA2C,aAAA,QAAA5B,oBAAA,eAAAA,oBAAA,CAAAnB,OAAA,CAAAgD,SAAA,UAAAvC,CAAA,SAAAA,CAAA,EAEnB,KAAM,CAAAwC,yBAAyB,QAAS,CAAAC,gBAAU,CACvDC,WAAWA,CAACC,KAAK,CAAEC,OAAO,CAAE,CAC1B,KAAK,CAACD,KAAK,CAAEC,OAAO,CAAC,CAErB,IAAI,CAACC,QAAQ,CAAG,IAAI,CAACA,QAAQ,CAACC,IAAI,CAAC,IAAI,CAAC,CACxC,IAAI,CAACC,SAAS,CAAG,IAAI,CAACA,SAAS,CAACD,IAAI,CAAC,IAAI,CAAC,CAE1C,IAAI,CAACC,SAAS,CAACJ,KAAK,CAAC,CAErB,IAAI,CAACK,KAAK,CAAG,CACXC,MAAM,CACJ,IAAI,CAACpB,KAAK,GAAKc,KAAK,CAACO,SAAS,EAC9B,CAAC,IAAI,CAACP,KAAK,CAACQ,OAAO,CAACC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACa,KAAK,CAAC,CAACwB,QAAQ,CAAC,IAAI,CAACxB,KAAK,CAC/D,CACF,CAEAyB,gCAAgCA,CAACX,KAAK,CAAE,CACtC,IAAI,CAACI,SAAS,CAACJ,KAAK,CACtB,CAEAI,SAASA,CAACJ,KAAK,CAAE,CACf,IAAI,CAACd,KAAK,CACRc,KAAK,CAACY,SAAS,GAAK5C,SAAS,EAAIgC,KAAK,CAACY,SAAS,GAAKC,mCAAwB,CACzE,IAAI,CAACb,KAAK,CAACc,UAAU,CACrBd,KAAK,CAACY,SACd,CAEAV,QAAQA,CAAChB,KAAK,CAAkB,IAAhB,CAAAoB,MAAM,CAAA3B,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAX,SAAA,CAAAW,SAAA,IAAG,KAAK,CAC5B,IAAI,CAACO,KAAK,CAAGA,KAAK,CAClB,GAAM,CAAAqB,SAAS,CAAG,IAAI,CAACP,KAAK,CAACO,SAAS,CACtC,IAAI,CAACQ,QAAQ,CAAC,CACZT,MAAM,CAAE,CAACA,MAAM,EAAIpB,KAAK,GAAKqB,SAAS,GAAKrB,KAAK,GAAK,EACvD,CAAC,CAAC,CACF,IAAI,CAACc,KAAK,CAACgB,eAAe,CAAC,CACzB,CAAC,IAAI,CAAChB,KAAK,CAACiB,IAAI,EAAG/B,KAAK,GAAKqB,SAAS,EAAI,CAACD,MAAM,CAAGC,SAAS,CAAGrB,KAClE,CAAC,CACH,CAEAgC,MAAMA,CAAA,CAAG,CACP,GAAM,CAACV,OAAO,CAAES,IAAI,CAAEV,SAAS,CAAC,CAAG,IAAI,CAACP,KAAK,CAC7C,GAAM,CAAAd,KAAK,CACT,CAAC,IAAI,CAACA,KAAK,GAAK,EAAE,EAAI,CAACsB,OAAO,CAACC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACa,KAAK,CAAC,CAACwB,QAAQ,CAAC,IAAI,CAACxB,KAAK,CAAC,GAAK,IAAI,CAACmB,KAAK,CAACC,MAAM,CACzFC,SAAS,CACT,IAAI,CAACrB,KAAK,CAEhB,MACE,CAAAlD,MAAA,CAAAY,OAAA,CAAAuE,aAAA,CAAC5E,MAAA,CAAAK,OAAK,CAAK,IAAI,CAACoD,KAAK,CACnBhE,MAAA,CAAAY,OAAA,CAAAuE,aAAA,CAAC3E,SAAA,CAAAI,OAAc,EACbwE,cAAc,CAAE,IAAI,CAACpB,KAAK,CAACoB,cAAe,CAC1CZ,OAAO,CAAEA,OAAQ,CACjBtB,KAAK,CAAEA,KAAM,CACbmC,QAAQ,CAAE,IAAI,CAACnB,QAAS,CACxBoB,SAAS,CAAE,IAAI,CAACtB,KAAK,CAACsB,SAAU,CAChCC,UAAU,CAAE,IAAI,CAACvB,KAAK,CAACuB,UAAW,CAClCC,WAAW,CAAE,IAAI,CAACxB,KAAK,CAACwB,WAAY,CACrC,CAAC,CAED,IAAI,CAACnB,KAAK,CAACC,MAAM,EAChBtE,MAAA,CAAAY,OAAA,CAAAuE,aAAA,CAAC1E,KAAA,CAAAG,OAAI,EACHqE,IAAI,CAAEA,IAAK,CACXQ,UAAU,CAAGvC,KAAK,EAAK,IAAI,CAACgB,QAAQ,CAAChB,KAAK,CAAE,IAAI,CAAE,CAClDmC,QAAQ,CAAGnC,KAAK,EAAK,CACnB,GAAIA,KAAK,CAAE,CACT,IAAI,CAACgB,QAAQ,CAAChB,KAAK,CAAE,IAAI,CAC3B,CACF,CAAE,CACH,CAEE,CAEX,CAACwC,iCAAAC,GAAA,CAAAC,IAAA,OAAAD,GAAA,EAAAE,IAAA,CAAAD,IAAA,EACH,CAACE,OAAA,CAAAjC,yBAAA,CAAAA,yBAAA,CAEDA,yBAAyB,CAACkC,SAAS,CAAArD,aAAA,EACjC0C,cAAc,CAAEY,kBAAS,CAACC,IAAI,CAC9BrB,SAAS,CAAEoB,kBAAS,CAACE,GAAG,CACxBT,UAAU,CAAEO,kBAAS,CAACG,IAAI,CAC1Bb,SAAS,CAAEU,kBAAS,CAACC,IAAI,CACzBV,UAAU,CAAES,kBAAS,CAACI,MAAM,CAC5BZ,WAAW,CAAEQ,kBAAS,CAACE,GAAG,CAC1BpB,UAAU,CAAEkB,kBAAS,CAACK,SAAS,CAAC,CAACL,kBAAS,CAACM,MAAM,CAAEN,kBAAS,CAACC,IAAI,CAAED,kBAAS,CAACO,MAAM,CAAC,CAAC,CACrFhC,SAAS,CAAEyB,kBAAS,CAACK,SAAS,CAAC,CAACL,kBAAS,CAACM,MAAM,CAAEN,kBAAS,CAACC,IAAI,CAAED,kBAAS,CAACO,MAAM,CAAC,CAAC,CACpFC,KAAK,CAAER,kBAAS,CAACO,MAAM,CACvBtB,IAAI,CAAEe,kBAAS,CAACO,MAAM,EACnBE,cAAK,CAACV,SAAS,CACnB,CAEDlC,yBAAyB,CAAC6C,YAAY,CAAG,CACvC1B,eAAe,CAAEgB,kBAAS,CAACG,IAC7B,CAAC,CAEDtC,yBAAyB,CAAC8C,WAAW,CAAG,2BAA2B,CAAC,IAAAC,QAAA,CAErD,GAAAC,uBAAkB,EAAChD,yBAAyB,CAAC,KAAAiD,SAAA,CAAAhB,OAAA,CAAAlF,OAAA,CAAAgG,QAAA,kBAAAG,cAAA,QAAAhF,oBAAA,eAAAA,oBAAA,CAAAnB,OAAA,CAAAoB,SAAA,KAAA+E,cAAA,SAAAA,cAAA,CAAAC,QAAA,CA7F/CnD,yBAAyB,8GAAAkD,cAAA,CAAAC,QAAA,CAAAJ,QAAA,iHAAAK,WAAA,QAAAlF,oBAAA,eAAAA,oBAAA,CAAAkF,WAAA,CAAAjF,SAAA,CAAAiF,WAAA,EAAAA,WAAA,CAAAhF,MAAA","ignoreList":[]}