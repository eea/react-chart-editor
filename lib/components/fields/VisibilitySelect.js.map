{"version":3,"file":"VisibilitySelect.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","_constants","_Field","_Radio","_Dropdown","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","__signature__","signature","UnconnectedVisibilitySelect","Component","constructor","props","context","setMode","bind","setLocals","UNSAFE_componentWillReceiveProps","getChildContext","_this$props$resettabl","visibilityMode","mode","resettable","fullValue","MULTI_VALUED_PLACEHOLDER","defaultOpt","_this$props$resettabl2","update","showOn","Array","isArray","includes","React","Children","map","children","child","attr","updatePlot","render","dropdown","clearable","options","label","createElement","Fragment","__reactstandin__regenerateByEval","key","code","eval","exports","propTypes","PropTypes","any","func","onChange","bool","oneOfType","number","string","array","Field","contextTypes","updateContainer","fullContainer","object","childContextTypes","displayName","plotly_editor_traits","visibility_select","_default","connectToContainer","_default2","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/fields/VisibilitySelect.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connectToContainer} from 'lib';\nimport {MULTI_VALUED_PLACEHOLDER} from 'lib/constants';\nimport Field from './Field';\nimport Radio from './Radio';\nimport Dropdown from './Dropdown';\n\nexport class UnconnectedVisibilitySelect extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.setMode = this.setMode.bind(this);\n    this.setLocals = this.setLocals.bind(this);\n\n    this.setLocals(props);\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    this.setLocals(props);\n  }\n\n  getChildContext() {\n    return {\n      visibilityMode: this.mode,\n      resettable: this.props.resettable ?? this.context.resettable,\n    };\n  }\n\n  setLocals(props) {\n    this.mode =\n      props.fullValue === undefined || props.fullValue === MULTI_VALUED_PLACEHOLDER\n        ? this.props.defaultOpt\n        : props.fullValue;\n  }\n\n  setMode(mode) {\n    const update = {};\n    const {showOn} = this.props;\n    const resettable = this.props.resettable ?? this.context.resettable;\n    if (resettable && !((Array.isArray(showOn) && showOn.includes(mode)) || mode === showOn)) {\n      React.Children.map(this.props.children, (child) => {\n        update[child.props.attr] = null;\n      });\n    }\n    this.props.updatePlot(mode, update);\n  }\n\n  render() {\n    const {dropdown, clearable, options, showOn, attr, label} = this.props;\n\n    return (\n      <>\n        {dropdown ? (\n          <Dropdown\n            attr={attr}\n            label={label}\n            options={options}\n            fullValue={this.mode}\n            updatePlot={this.setMode}\n            clearable={clearable}\n          />\n        ) : (\n          <Radio\n            attr={attr}\n            label={label}\n            options={options}\n            fullValue={this.mode}\n            updatePlot={this.setMode}\n          />\n        )}\n        {(Array.isArray(showOn) && showOn.includes(this.mode)) || this.mode === showOn\n          ? this.props.children\n          : null}\n      </>\n    );\n  }\n}\n\nUnconnectedVisibilitySelect.propTypes = {\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  onChange: PropTypes.func,\n  dropdown: PropTypes.bool,\n  clearable: PropTypes.bool,\n  showOn: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.bool,\n    PropTypes.string,\n    PropTypes.array,\n  ]),\n  resettable: PropTypes.bool,\n  defaultOpt: PropTypes.oneOfType([PropTypes.number, PropTypes.bool, PropTypes.string]),\n  label: PropTypes.string,\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedVisibilitySelect.contextTypes = {\n  updateContainer: PropTypes.func,\n  fullContainer: PropTypes.object,\n  resettable: PropTypes.bool,\n};\n\nUnconnectedVisibilitySelect.childContextTypes = {\n  visibilityMode: PropTypes.any,\n  resettable: PropTypes.bool,\n};\n\nUnconnectedVisibilitySelect.displayName = 'UnconnectedVisibilitySelect';\n\nUnconnectedVisibilitySelect.plotly_editor_traits = {\n  visibility_select: true,\n};\n\nexport default connectToContainer(UnconnectedVisibilitySelect);\n"],"mappings":"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","ignoreList":[]}