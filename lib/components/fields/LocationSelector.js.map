{"version":3,"file":"LocationSelector.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","_Field","_Radio","_Dropdown","_DataSelector","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","__signature__","signature","LocationmodeVisible","connectToContainer","UnconnectedDropdown","modifyPlotProps","props","context","plotProps","fullValue","isVisible","container","locationmode","UnconnectedLocation","Component","render","localize","_","createElement","Fragment","label","attr","clearable","options","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","string","Field","contextTypes","func","updateContainer","Location","UnconnectedLocationSelector","constructor","state","mode","locations","setMode","UNSAFE_componentWillMount","setState","locationssrc","locationmodesrc","lat","lon","latsrc","lonsrc","type","updatePlot","any","object","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/fields/LocationSelector.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connectToContainer} from 'lib';\nimport Field from './Field';\nimport Radio from './Radio';\nimport {UnconnectedDropdown} from './Dropdown';\nimport DataSelector from './DataSelector';\n\nconst LocationmodeVisible = connectToContainer(UnconnectedDropdown, {\n  modifyPlotProps: (props, context, plotProps) => {\n    if (!plotProps.fullValue) {\n      plotProps.isVisible = true;\n      plotProps.fullValue = plotProps.container.locationmode;\n      return;\n    }\n  },\n});\n\nclass UnconnectedLocation extends Component {\n  render() {\n    const {localize: _} = this.context;\n\n    return (\n      <>\n        <DataSelector label={_('Locations')} attr=\"locations\" />\n        <LocationmodeVisible\n          label={_('Location Format')}\n          attr=\"locationmode\"\n          clearable={false}\n          options={[\n            {label: _('GeoJSON feature'), value: 'geojson-id'},\n            {label: _('Country Names'), value: 'country names'},\n            {label: _('Country Abbreviations (ISO-3)'), value: 'ISO-3'},\n            {\n              label: _('USA State Abbreviations (e.g. NY)'),\n              value: 'USA-states',\n            },\n          ]}\n        />\n      </>\n    );\n  }\n}\n\nUnconnectedLocation.propTypes = {\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedLocation.contextTypes = {\n  localize: PropTypes.func,\n  updateContainer: PropTypes.func,\n};\n\nconst Location = connectToContainer(UnconnectedLocation);\n\nclass UnconnectedLocationSelector extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      mode: props.container.locations ? 'location' : 'latlon',\n    };\n\n    this.setMode = this.setMode.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({\n      mode: this.props.container.locations ? 'location' : 'latlon',\n    });\n  }\n\n  setMode(mode) {\n    this.setState({mode: mode});\n    this.props.updateContainer(\n      mode === 'latlon'\n        ? {\n            locations: null,\n            locationmode: null,\n            locationssrc: null,\n            locationmodesrc: null,\n          }\n        : {lat: null, lon: null, latsrc: null, lonsrc: null}\n    );\n  }\n\n  render() {\n    const {mode} = this.state;\n    const {\n      localize: _,\n      container: {type: type},\n    } = this.context;\n\n    if (type === 'scattergeo') {\n      return (\n        <>\n          <Field {...this.props} attr={this.props.attr}>\n            <Radio\n              options={[\n                {value: 'latlon', label: _('Lat/Lon')},\n                {value: 'location', label: _('Location')},\n              ]}\n              fullValue={mode}\n              updatePlot={this.setMode}\n              attr={this.props.attr}\n            />\n          </Field>\n          {mode === 'latlon' ? (\n            <>\n              <DataSelector label={_('Latitude')} attr=\"lat\" />\n              <DataSelector label={_('Longitude')} attr=\"lon\" />\n            </>\n          ) : (\n            <Location attr=\"type\" />\n          )}\n        </>\n      );\n    } else if (type === 'choropleth') {\n      return <Location attr=\"type\" />;\n    } else if (type === 'choroplethmapbox') {\n      return <DataSelector label={_('Locations')} attr=\"locations\" />;\n    }\n    return (\n      <>\n        <DataSelector label={_('Latitude')} attr=\"lat\" />\n        <DataSelector label={_('Longitude')} attr=\"lon\" />\n      </>\n    );\n  }\n}\n\nUnconnectedLocationSelector.propTypes = {\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedLocationSelector.contextTypes = {\n  container: PropTypes.object,\n  localize: PropTypes.func,\n  updateContainer: PropTypes.func,\n};\n\nexport default connectToContainer(UnconnectedLocationSelector);\n"],"mappings":"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","ignoreList":[]}