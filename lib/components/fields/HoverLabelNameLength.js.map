{"version":3,"file":"HoverLabelNameLength.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lib","_Field","_RadioBlocks","_NumericInput","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","__signature__","signature","UnconnectedHoverLabelNameLength","Component","constructor","props","state","currentOption","getCurrentOption","onOptionChange","bind","updateHoverTemplate","fullValue","UNSAFE_componentWillReceiveProps","nextProps","setState","option","updatePlot","specialTypes","type","hovertemplate","container","includes","updateContainer","concat","replace","render","_","context","localize","createElement","activeOption","options","label","style","height","width","onChange","onUpdate","units","__reactstandin__regenerateByEval","key","code","eval","exports","propTypes","PropTypes","number","func","Field","contextTypes","displayName","_default","connectToContainer","modifyPlotProps","plotProps","isVisible","hoverinfo","_default2","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/fields/HoverLabelNameLength.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connectToContainer } from 'lib';\nimport Field from './Field';\nimport RadioBlocks from '../widgets/RadioBlocks';\nimport NumericInput from '../widgets/NumericInput';\n\nexport class UnconnectedHoverLabelNameLength extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentOption: this.getCurrentOption(props),\n    };\n    this.onOptionChange = this.onOptionChange.bind(this);\n    this.updateHoverTemplate = this.updateHoverTemplate.bind(this);\n  }\n\n  getCurrentOption(props) {\n    return props.fullValue > 0 ? 'clip' : props.fullValue === 0 ? 'hide' : 'no-clip';\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.fullValue !== this.props.fullValue) {\n      this.setState({\n        currentOption: this.getCurrentOption(nextProps),\n      }, this.updateHoverTemplate);\n    }\n  }\n\n  onOptionChange(option) {\n    if (this.state.currentOption !== 'clip' && option === 'clip') {\n      // this allows us to go back to plotly.js default if we've\n      // clicked away from the 'clip' option.\n      this.props.updatePlot(15); //eslint-disable-line\n      return;\n    }\n    if (option === 'no-clip') {\n      this.props.updatePlot(-1);\n      return;\n    }\n    if (option === 'hide') {\n      this.props.updatePlot(0);\n      return;\n    }\n  }\n\n  updateHoverTemplate() {\n    const specialTypes = [\"pie\", \"sunburst\"];\n    const { type, hovertemplate } = this.props.container;\n\n    if (specialTypes.includes(type) && hovertemplate) {\n      if (this.state.currentOption === \"hide\" && !hovertemplate.includes(\"<extra>\")) {\n        this.props.updateContainer({\n          hovertemplate: `${hovertemplate}<extra></extra>`,\n        });\n      }\n\n      if (this.state.currentOption !== \"hide\" && hovertemplate.includes(\"<extra>\")) {\n        this.props.updateContainer({\n          hovertemplate: hovertemplate.replace(\"<extra></extra>\", \"\"),\n        });\n      }\n    }\n  }\n\n  render() {\n    const _ = this.context.localize;\n\n    return (\n      <Field {...this.props}>\n        <RadioBlocks\n          activeOption={this.state.currentOption}\n          options={[\n            { label: _('Clip To'), value: 'clip' },\n            { label: _('No Clip'), value: 'no-clip' },\n            { label: _('Hide'), value: 'hide' },\n          ]}\n          onOptionChange={this.onOptionChange}\n        />\n        <div style={{ height: '10px', width: '100%' }} />\n        {this.state.currentOption === 'clip' ? (\n          <NumericInput\n            value={this.props.fullValue}\n            onChange={this.props.updatePlot}\n            onUpdate={this.props.updatePlot}\n            units=\"px\"\n          />\n        ) : null}\n      </Field>\n    );\n  }\n}\n\nUnconnectedHoverLabelNameLength.propTypes = {\n  fullValue: PropTypes.number,\n  updatePlot: PropTypes.func,\n  ...Field.propTypes,\n};\n\nUnconnectedHoverLabelNameLength.contextTypes = {\n  localize: PropTypes.func,\n};\n\nUnconnectedHoverLabelNameLength.displayName = 'UnconnectedHoverLabelNameLength';\n\nexport default connectToContainer(UnconnectedHoverLabelNameLength, {\n  modifyPlotProps: (props, context, plotProps) => {\n    const { container } = plotProps;\n    plotProps.isVisible =\n      (container.hoverinfo && container.hoverinfo.includes('name')) ||\n      container.hovertemplate ||\n      container.hovertemplate === ' ';\n  },\n});\n"],"mappings":"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","ignoreList":[]}