{"version":3,"file":"MarkerSize.js","names":["_Field","_interopRequireDefault","require","_propTypes","_react","_interopRequireWildcard","_lib","_RadioBlocks","_Numeric","_DataSelector","_constants","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_extends","assign","bind","__signature__","signature","UnconnectedMarkerSize","Component","constructor","props","context","type","container","marker","sizesrc","Array","isArray","size","fullContainer","state","constant","fullValue","variable","setType","setValue","setState","updatePlot","updateContainer","inputValue","render","_this$props","attr","_","localize","_this$state","options","label","multiValued","includes","MULTI_VALUED","createElement","activeOption","onOptionChange","suppressMultiValuedMessage","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","any","func","Field","contextTypes","displayName","_default","connectToContainer","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/fields/MarkerSize.js"],"sourcesContent":["import Field from './Field';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectToContainer} from 'lib';\nimport RadioBlocks from '../widgets/RadioBlocks';\nimport Numeric from './Numeric';\nimport DataSelector from './DataSelector';\nimport {MULTI_VALUED} from 'lib/constants';\n\nclass UnconnectedMarkerSize extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    let type = null;\n    if (!props.container.marker || (props.container.marker && !props.container.marker.sizesrc)) {\n      type = 'constant';\n    } else if (\n      props.container.marker &&\n      Array.isArray(props.container.marker.size) &&\n      props.fullContainer.marker &&\n      Array.isArray(props.fullContainer.marker.size)\n    ) {\n      type = 'variable';\n    }\n\n    this.state = {\n      type,\n      value: {\n        constant: type === 'constant' ? props.fullValue : '6',\n        variable: type === 'variable' ? props.fullValue : null,\n      },\n    };\n\n    this.setType = this.setType.bind(this);\n    this.setValue = this.setValue.bind(this);\n  }\n\n  setType(type) {\n    this.setState({type: type});\n    this.props.updatePlot(this.state.value[type]);\n    if (type === 'constant') {\n      this.context.updateContainer({['marker.sizesrc']: null});\n    } else {\n      this.context.updateContainer({\n        ['marker.size']: null,\n        ['marker.sizesrc']: null,\n      });\n    }\n  }\n\n  setValue(inputValue) {\n    const {type} = this.state;\n\n    this.setState(\n      type === 'constant' ? {value: {constant: inputValue}} : {value: {variable: inputValue}}\n    );\n    this.props.updatePlot(inputValue);\n  }\n\n  render() {\n    const {attr, fullValue} = this.props;\n    const {localize: _} = this.context;\n    const {type, value} = this.state;\n    const options = [\n      {label: _('Constant'), value: 'constant'},\n      {label: _('Variable'), value: 'variable'},\n    ];\n    const multiValued =\n      this.props.multiValued || (Array.isArray(fullValue) && fullValue.includes(MULTI_VALUED));\n\n    return (\n      <Field {...this.props} multiValued={multiValued} attr={attr}>\n        <RadioBlocks options={options} activeOption={type} onOptionChange={this.setType} />\n        {type === 'constant' ? (\n          <Numeric\n            suppressMultiValuedMessage\n            attr=\"marker.size\"\n            updatePlot={this.setValue}\n            fullValue={value.constant}\n          />\n        ) : multiValued ? null : (\n          <DataSelector suppressMultiValuedMessage attr=\"marker.size\" updatePlot={this.setValue} />\n        )}\n      </Field>\n    );\n  }\n}\n\nUnconnectedMarkerSize.propTypes = {\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  ...Field.propTypes,\n};\n\nUnconnectedMarkerSize.contextTypes = {\n  localize: PropTypes.func,\n  updateContainer: PropTypes.func,\n};\n\nUnconnectedMarkerSize.displayName = 'UnconnectedMarkerSize';\n\nexport default connectToContainer(UnconnectedMarkerSize);\n"],"mappings":"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","ignoreList":[]}