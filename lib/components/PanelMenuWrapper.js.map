{"version":3,"file":"PanelMenuWrapper.js","names":["_propTypes","_interopRequireDefault","require","_react","_interopRequireWildcard","_SidebarGroup","_lib","_sortMenu","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","PanelsWithSidebar","Component","constructor","props","opts","computeMenuOptions","firstSidebarGroup","filter","o","panels","state","group","name","panel","setPanel","bind","renderSection","setState","getChildContext","section","type","plotly_editor_traits","sidebar_element","cloneElement","key","createElement","selectedGroup","selectedPanel","onChangeGroup","children","menuPanelOrder","sections","groupLookup","groupIndex","childrenArray","sortMenu","React","Children","toArray","forEach","child","obj","length","push","render","menuOpts","className","bem","map","__reactstandin__regenerateByEval","code","eval","propTypes","PropTypes","node","array","childContextTypes","func","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../src/components/PanelMenuWrapper.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, {cloneElement, Component} from 'react';\nimport SidebarGroup from './sidebar/SidebarGroup';\nimport {bem} from 'lib';\nimport sortMenu from 'lib/sortMenu';\n\nclass PanelsWithSidebar extends Component {\n  constructor(props) {\n    super(props);\n\n    const opts = this.computeMenuOptions(props);\n    const firstSidebarGroup = opts.filter((o) => o.panels)[0];\n\n    this.state = {\n      group: firstSidebarGroup.name,\n      panel: firstSidebarGroup.panels[0],\n    };\n\n    this.setPanel = this.setPanel.bind(this);\n    this.renderSection = this.renderSection.bind(this);\n  }\n\n  setPanel(group, panel) {\n    this.setState({group, panel});\n  }\n\n  getChildContext() {\n    return {\n      setPanel: this.setPanel,\n    };\n  }\n\n  renderSection(section, i) {\n    if (section.type && (section.type.plotly_editor_traits || {}).sidebar_element) {\n      return cloneElement(section, {key: i});\n    }\n    return (\n      <SidebarGroup\n        key={i}\n        selectedGroup={this.state.group}\n        selectedPanel={this.state.panel}\n        group={section.name}\n        panels={section.panels}\n        onChangeGroup={this.setPanel}\n      />\n    );\n  }\n\n  computeMenuOptions(props) {\n    const {children, menuPanelOrder} = props;\n    const sections = [];\n    const groupLookup = {};\n    let groupIndex;\n    const childrenArray = sortMenu(React.Children.toArray(children), menuPanelOrder);\n\n    childrenArray.forEach((child) => {\n      if (!child) {\n        return;\n      }\n      const group = child.props.group;\n      const name = child.props.name;\n\n      if (group && name) {\n        let obj;\n        if (groupLookup.hasOwnProperty(group)) {\n          groupIndex = groupLookup[group];\n          obj = sections[groupIndex];\n        } else {\n          groupLookup[group] = sections.length;\n          obj = {name: group, panels: []};\n          sections.push(obj);\n        }\n        obj.panels.push(name);\n      }\n\n      if ((child.type.plotly_editor_traits || {}).sidebar_element) {\n        sections.push(child);\n      }\n    });\n\n    return sections;\n  }\n\n  render() {\n    const menuOpts = this.computeMenuOptions(this.props);\n\n    return (\n      <div className={bem('editor_controls', 'wrapper')}>\n        <div className={bem('sidebar')}>{menuOpts.map(this.renderSection)}</div>\n        {React.Children.map(this.props.children, (child, i) =>\n          child === null ||\n          this.state.group !== child.props.group ||\n          this.state.panel !== child.props.name\n            ? null\n            : cloneElement(child, {key: i})\n        )}\n      </div>\n    );\n  }\n}\n\nPanelsWithSidebar.propTypes = {\n  children: PropTypes.node,\n  menuPanelOrder: PropTypes.array,\n};\n\nPanelsWithSidebar.childContextTypes = {\n  setPanel: PropTypes.func,\n};\n\nexport default PanelsWithSidebar;\n"],"mappings":"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","ignoreList":[]}