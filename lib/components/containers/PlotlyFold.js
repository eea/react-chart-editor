"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.Fold=void 0;var _FoldEmpty=_interopRequireDefault(require("./FoldEmpty"));var _propTypes=_interopRequireDefault(require("prop-types"));var _react=_interopRequireWildcard(require("react"));var _classnames=_interopRequireDefault(require("classnames"));var _plotlyIcons=require("plotly-icons");var _lib=require("../../lib");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(function(){var enterModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.enterModule:undefined;enterModule&&enterModule(module)})();var __signature__=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default.signature:function(a){return a};class Fold extends _react.Component{constructor(){super();this.foldVisible=true}getChildContext(){return{foldInfo:this.props.foldInfo?this.props.foldInfo:null}}render(){if(!this.foldVisible&&!this.props.messageIfEmpty){return null}var _this$props=this.props,_this$props$canFold=_this$props.canFold,canFold=_this$props$canFold===void 0?true:_this$props$canFold,_this$props$canReorde=_this$props.canReorder,canReorder=_this$props$canReorde===void 0?true:_this$props$canReorde,canDelete=_this$props.canDelete,children=_this$props.children,className=_this$props.className,foldInfo=_this$props.foldInfo,toggleFold=_this$props.toggleFold,hideHeader=_this$props.hideHeader,Icon=_this$props.icon,messageIfEmpty=_this$props.messageIfEmpty,name=_this$props.name,canMoveUp=_this$props.canMoveUp,canMoveDown=_this$props.canMoveDown;var moveContainer=this.props.moveContainer||this.context.moveContainer;var deleteContainer=this.props.deleteContainer||this.context.deleteContainer;var folded=canFold?this.props.folded:false;var contentClass=(0,_classnames.default)("fold__content",{"fold__content--noheader":hideHeader});var headerClass=(0,_classnames.default)("fold__top",{"fold__top--open":!folded});var arrowClass=(0,_classnames.default)("fold__top__arrow",{"fold__top__arrow--open":!folded});var arrowDownIcon=_react.default.createElement("div",{className:arrowClass},_react.default.createElement("div",{className:"fold__top__arrow__wrapper"},_react.default.createElement(_plotlyIcons.AngleDownIcon,null)));var icon=Icon?_react.default.createElement(Icon,{className:"fold__top__icon"}):null;var deleteButton=canDelete&&typeof deleteContainer==="function"?_react.default.createElement("div",{className:"fold__top__delete js-fold__delete",onClick:e=>{e.stopPropagation();deleteContainer(foldInfo)},role:"button",tabIndex:"0",onKeyUp:()=>{}},_react.default.createElement(_plotlyIcons.CloseIcon,null)):null;var movingControls=(canMoveDown||canMoveUp)&&_react.default.createElement("div",{className:"fold__top__moving-controls"},_react.default.createElement("span",{className:"fold__top__moving-controls--up".concat(canMoveUp?"":"--disabled"),onClick:e=>{e.stopPropagation();if(canMoveUp){if(!moveContainer||typeof moveContainer!=="function"){throw new Error("moveContainer must be a function")}moveContainer("up")}},role:"button",tabIndex:"0",onKeyUp:()=>{}},_react.default.createElement(_plotlyIcons.AngleDownIcon,null)),_react.default.createElement("span",{className:"fold__top__moving-controls--down".concat(canMoveDown?"":"--disabled"),onClick:e=>{e.stopPropagation();if(canMoveDown){if(!moveContainer||typeof moveContainer!=="function"){throw new Error("moveContainer must be a function")}moveContainer("down")}}},_react.default.createElement(_plotlyIcons.AngleDownIcon,null)));var foldHeader=!hideHeader&&_react.default.createElement("div",{className:headerClass,onClick:toggleFold},_react.default.createElement("div",{className:"fold__top__arrow-title"},canFold&&arrowDownIcon,icon,_react.default.createElement("div",{className:"fold__top__title"},(0,_lib.striptags)(name))),canReorder&&movingControls,deleteButton);var foldContent=null;if(!folded){if(this.foldVisible){foldContent=_react.default.createElement("div",{className:contentClass},children)}else{foldContent=_react.default.createElement("div",{className:contentClass},_react.default.createElement(_FoldEmpty.default,{icon:Icon,messagePrimary:messageIfEmpty}))}}var classes=className?" "+className:"";return _react.default.createElement("div",{className:"fold".concat(classes)},foldHeader,foldContent)}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}exports.Fold=Fold;Fold.plotly_editor_traits={foldable:true};Fold.propTypes={canDelete:_propTypes.default.bool,canFold:_propTypes.default.bool,canReorder:_propTypes.default.bool,children:_propTypes.default.node,className:_propTypes.default.string,folded:_propTypes.default.bool,foldInfo:_propTypes.default.object,toggleFold:_propTypes.default.func,moveContainer:_propTypes.default.func,deleteContainer:_propTypes.default.func,hideHeader:_propTypes.default.bool,icon:_propTypes.default.oneOfType([_propTypes.default.node,_propTypes.default.func]),messageIfEmpty:_propTypes.default.string,name:_propTypes.default.string,canMoveUp:_propTypes.default.bool,canMoveDown:_propTypes.default.bool};Fold.contextTypes={deleteContainer:_propTypes.default.func};Fold.childContextTypes={foldInfo:_propTypes.default.object};class PlotlyFold extends Fold{constructor(props,context){super(props,context);this.foldVisible=false;this.determineVisibility(props,context)}UNSAFE_componentWillReceiveProps(nextProps,nextContext){this.determineVisibility(nextProps,nextContext)}determineVisibility(nextProps,nextContext){this.foldVisible=false;_react.default.Children.forEach(nextProps.children,child=>{if(!child||this.foldVisible){return}if(child.props.attr){var plotProps=(0,_lib.unpackPlotProps)(child.props,nextContext);if(child.type.modifyPlotProps){child.type.modifyPlotProps(child.props,nextContext,plotProps)}this.foldVisible=this.foldVisible||plotProps.isVisible;return}if(!(child.type.plotly_editor_traits||{}).no_visibility_forcing){this.foldVisible=true;return}})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}PlotlyFold.plotly_editor_traits={foldable:true};PlotlyFold.contextTypes=Object.assign({deleteContainer:_propTypes.default.func,moveContainer:_propTypes.default.func},_lib.containerConnectedContextTypes);var _default=PlotlyFold;var _default2=exports.default=_default;;(function(){var reactHotLoader=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default:undefined;if(!reactHotLoader){return}reactHotLoader.register(Fold,"Fold","/Users/razvan/Work/react-chart-editor/src/components/containers/PlotlyFold.js");reactHotLoader.register(PlotlyFold,"PlotlyFold","/Users/razvan/Work/react-chart-editor/src/components/containers/PlotlyFold.js");reactHotLoader.register(_default,"default","/Users/razvan/Work/react-chart-editor/src/components/containers/PlotlyFold.js")})();;(function(){var leaveModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.leaveModule:undefined;leaveModule&&leaveModule(module)})();
//# sourceMappingURL=PlotlyFold.js.map