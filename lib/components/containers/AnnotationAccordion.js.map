{"version":3,"file":"AnnotationAccordion.js","names":["_PlotlyFold","_interopRequireDefault","require","_derived","_PanelEmpty","_propTypes","_react","_interopRequireWildcard","_cloneDeep","_lib","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","AnnotationFold","connectAnnotationToLayout","PlotlyFold","AnnotationAccordion","Component","render","_this$context","context","defaults","_this$context$layout","layout","_this$context$layout$","annotations","_this$context$layout$2","meta","_","localize","_this$props","props","canAdd","children","canReorder","content","length","map","ann","createElement","key","annotationIndex","name","getParsedTemplateString","text","canDelete","addAction","label","handler","_ref","updateContainer","Array","isArray","concat","value","cloneDeep","annotation","LayoutPanel","PanelMessage","heading","__reactstandin__regenerateByEval","code","eval","contextTypes","PropTypes","object","func","propTypes","node","bool","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/containers/AnnotationAccordion.js"],"sourcesContent":["import PlotlyFold from './PlotlyFold';\nimport {LayoutPanel} from './derived';\nimport {PanelMessage} from './PanelEmpty';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport cloneDeep from 'lodash/cloneDeep';\nimport {connectAnnotationToLayout, getParsedTemplateString} from 'lib';\n\nconst AnnotationFold = connectAnnotationToLayout(PlotlyFold);\n\nclass AnnotationAccordion extends Component {\n  render() {\n    const {\n      defaults,\n      layout: {annotations = [], meta = []},\n      localize: _,\n    } = this.context;\n    const {canAdd, children, canReorder} = this.props;\n\n    const content =\n      annotations.length &&\n      annotations.map((ann, i) => {\n        return (\n          <AnnotationFold\n            key={i}\n            annotationIndex={i}\n            name={getParsedTemplateString(ann.text, {meta})}\n            canDelete={canAdd}\n          >\n            {children}\n          </AnnotationFold>\n        );\n      });\n\n    const addAction = {\n      label: _('Annotation'),\n      handler: ({layout, updateContainer}) => {\n        let annotationIndex;\n        if (Array.isArray(layout.annotations)) {\n          annotationIndex = layout.annotations.length;\n        } else {\n          annotationIndex = 0;\n        }\n\n        const key = `annotations[${annotationIndex}]`;\n        const value = cloneDeep(defaults.annotation || {});\n        value.text = _('new text');\n\n        if (updateContainer) {\n          updateContainer({[key]: value});\n        }\n      },\n    };\n\n    return (\n      <LayoutPanel addAction={canAdd ? addAction : null} canReorder={canReorder}>\n        {content ? (\n          content\n        ) : (\n          <PanelMessage heading={_('Call out your data.')}>\n            <p>\n              {_(\n                'Annotations are text and arrows you can use to point out specific parts of your figure.'\n              )}\n            </p>\n            <p>{_('Click on the + button above to add an annotation.')}</p>\n          </PanelMessage>\n        )}\n      </LayoutPanel>\n    );\n  }\n}\n\nAnnotationAccordion.contextTypes = {\n  layout: PropTypes.object,\n  localize: PropTypes.func,\n  defaults: PropTypes.object,\n};\n\nAnnotationAccordion.propTypes = {\n  children: PropTypes.node,\n  canAdd: PropTypes.bool,\n  canReorder: PropTypes.bool,\n};\n\nexport default AnnotationAccordion;\n"],"mappings":"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","ignoreList":[]}