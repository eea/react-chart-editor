{"version":3,"file":"AnnotationAccordion.js","names":["_PlotlyFold","_interopRequireDefault","require","_derived","_PanelEmpty","_propTypes","_react","_interopRequireWildcard","_cloneDeep","_lib","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","AnnotationFold","connectAnnotationToLayout","PlotlyFold","AnnotationAccordion","Component","render","defaults","layout","annotations","meta","localize","_","context","canAdd","children","canReorder","props","content","length","map","ann","createElement","key","annotationIndex","name","getParsedTemplateString","text","canDelete","addAction","label","handler","_ref","updateContainer","Array","isArray","concat","value","cloneDeep","annotation","LayoutPanel","PanelMessage","heading","__reactstandin__regenerateByEval","code","eval","contextTypes","PropTypes","object","func","propTypes","node","bool","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/containers/AnnotationAccordion.js"],"sourcesContent":["import PlotlyFold from './PlotlyFold';\nimport {LayoutPanel} from './derived';\nimport {PanelMessage} from './PanelEmpty';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport cloneDeep from 'lodash/cloneDeep';\nimport {connectAnnotationToLayout, getParsedTemplateString} from 'lib';\n\nconst AnnotationFold = connectAnnotationToLayout(PlotlyFold);\n\nclass AnnotationAccordion extends Component {\n  render() {\n    const {\n      defaults,\n      layout: {annotations = [], meta = []},\n      localize: _,\n    } = this.context;\n    const {canAdd, children, canReorder} = this.props;\n\n    const content =\n      annotations.length &&\n      annotations.map((ann, i) => {\n        return (\n          <AnnotationFold\n            key={i}\n            annotationIndex={i}\n            name={getParsedTemplateString(ann.text, {meta})}\n            canDelete={canAdd}\n          >\n            {children}\n          </AnnotationFold>\n        );\n      });\n\n    const addAction = {\n      label: _('Annotation'),\n      handler: ({layout, updateContainer}) => {\n        let annotationIndex;\n        if (Array.isArray(layout.annotations)) {\n          annotationIndex = layout.annotations.length;\n        } else {\n          annotationIndex = 0;\n        }\n\n        const key = `annotations[${annotationIndex}]`;\n        const value = cloneDeep(defaults.annotation || {});\n        value.text = _('new text');\n\n        if (updateContainer) {\n          updateContainer({[key]: value});\n        }\n      },\n    };\n\n    return (\n      <LayoutPanel addAction={canAdd ? addAction : null} canReorder={canReorder}>\n        {content ? (\n          content\n        ) : (\n          <PanelMessage heading={_('Call out your data.')}>\n            <p>\n              {_(\n                'Annotations are text and arrows you can use to point out specific parts of your figure.'\n              )}\n            </p>\n            <p>{_('Click on the + button above to add an annotation.')}</p>\n          </PanelMessage>\n        )}\n      </LayoutPanel>\n    );\n  }\n}\n\nAnnotationAccordion.contextTypes = {\n  layout: PropTypes.object,\n  localize: PropTypes.func,\n  defaults: PropTypes.object,\n};\n\nAnnotationAccordion.propTypes = {\n  children: PropTypes.node,\n  canAdd: PropTypes.bool,\n  canReorder: PropTypes.bool,\n};\n\nexport default AnnotationAccordion;\n"],"mappings":"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","ignoreList":[]}