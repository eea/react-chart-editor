"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _PlotlyFold=_interopRequireDefault(require("./PlotlyFold"));var _PlotlyPanel=_interopRequireDefault(require("./PlotlyPanel"));var _propTypes=_interopRequireDefault(require("prop-types"));var _react=_interopRequireWildcard(require("react"));var _lib=require("../../lib");var _PanelEmpty=require("./PanelEmpty");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(function(){var enterModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.enterModule:undefined;enterModule&&enterModule(module)})();var __signature__=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default.signature:function(a){return a};var TransformFold=(0,_lib.connectTransformToTrace)(_PlotlyFold.default);class TransformAccordion extends _react.Component{render(){var _this$context=this.context,_this$context$fullCon=_this$context.fullContainer.transforms,transforms=_this$context$fullCon===void 0?[]:_this$context$fullCon,_=_this$context.localize,container=_this$context.container,dataSourceOptions=_this$context.dataSourceOptions;var children=this.props.children;var transformTypes=[{label:_("Filter"),type:"filter"},{label:_("Split"),type:"groupby"},{label:_("Aggregate"),type:"aggregate"},{label:_("Sort"),type:"sort"}];var transformBy=container.transforms&&container.transforms.map(tr=>{var foldNameSuffix="";if(tr.groupssrc){var groupssrc=dataSourceOptions&&dataSourceOptions.find(d=>d.value===tr.groupssrc);foldNameSuffix=": ".concat(groupssrc&&groupssrc.label?groupssrc.label:tr.groupssrc)}else if(tr.targetsrc){var targetsrc=dataSourceOptions&&dataSourceOptions.find(d=>d.value===tr.targetsrc);foldNameSuffix=": ".concat(targetsrc&&targetsrc.label?targetsrc.label:tr.targetsrc)}return foldNameSuffix});var filteredTransforms=transforms.filter(_ref=>{var type=_ref.type;return Boolean(type)});var content=filteredTransforms.length&&filteredTransforms.map((tr,i)=>_react.default.createElement(TransformFold,{key:i,transformIndex:i,name:"".concat(transformTypes.filter(_ref2=>{var type=_ref2.type;return type===tr.type})[0].label).concat(transformBy&&transformBy[i]),canDelete:true},children));var addActionOptions=container.transforms&&container.transforms.some(t=>t.type==="groupby")?transformTypes.filter(t=>t.type!=="groupby"):transformTypes;var addAction={label:_("Transform"),handler:addActionOptions.map(_ref3=>{var label=_ref3.label,type=_ref3.type;return{label,handler:context=>{var fullContainer=context.fullContainer,updateContainer=context.updateContainer;if(updateContainer){var transformIndex=Array.isArray(fullContainer.transforms)?fullContainer.transforms.length:0;var key="transforms[".concat(transformIndex,"]");var payload={type};if(type==="filter"){payload.target=[];payload.targetsrc=null}else if(type!=="sort"){payload.groupssrc=null;payload.groups=null}if(type==="groupby"){payload.styles=[]}updateContainer({[key]:payload})}}}})};return _react.default.createElement(_PlotlyPanel.default,{addAction:addAction},content?content:_react.default.createElement(_PanelEmpty.PanelMessage,{icon:null},_react.default.createElement("div",{style:{textAlign:"left"}},_react.default.createElement("p",null,_react.default.createElement("strong",null,_("Filter"))," ",_(" transforms allow you to filter data out from a trace.")),_react.default.createElement("p",null,_react.default.createElement("strong",null,_("Split"))," ",_(" transforms allow you to create multiple traces from one source trace, so as to style them differently.")),_react.default.createElement("p",null,_react.default.createElement("strong",null,_("Aggregate"))," ",_(" transforms allow you to summarize a trace using an aggregate function like \"average\" or \"minimum\".")),_react.default.createElement("p",null,_react.default.createElement("strong",null,_("Sort"))," ",_(" transforms allow you to sort a trace, so as to control marker overlay or line connection order."))),_react.default.createElement("p",null,_("Click on the + button above to add a transform."))))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}TransformAccordion.contextTypes={fullContainer:_propTypes.default.object,localize:_propTypes.default.func,container:_propTypes.default.object,dataSourceOptions:_propTypes.default.array};TransformAccordion.propTypes={children:_propTypes.default.node};var _default=TransformAccordion;var _default2=exports.default=_default;;(function(){var reactHotLoader=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default:undefined;if(!reactHotLoader){return}reactHotLoader.register(TransformFold,"TransformFold","/Users/razvan/Work/react-chart-editor/src/components/containers/TransformAccordion.js");reactHotLoader.register(TransformAccordion,"TransformAccordion","/Users/razvan/Work/react-chart-editor/src/components/containers/TransformAccordion.js");reactHotLoader.register(_default,"default","/Users/razvan/Work/react-chart-editor/src/components/containers/TransformAccordion.js")})();;(function(){var leaveModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.leaveModule:undefined;leaveModule&&leaveModule(module)})();
//# sourceMappingURL=TransformAccordion.js.map