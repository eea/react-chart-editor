{"version":3,"file":"AnnotationAccordion-test.js","names":["_react","_interopRequireDefault","require","_","_fields","_testUtils","_lib","e","__esModule","default","enterModule","reactHotLoaderGlobal","undefined","module","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","__signature__","signature","a","LayoutPanel","connectLayoutToPlot","PlotlyPanel","describe","it","fixture","fixtures","scatter","layout","annotations","text","folds","mount","createElement","TestEditor","onUpdate","jest","fn","name","AnnotationAccordion","Numeric","attr","find","PlotlyFold","expect","toBe","at","prop","beforeUpdateLayout","editor","canAdd","simulate","payload","mock","calls","update","toEqual","beforeDeleteAnnotation","annotationIndex","reactHotLoader","register","leaveModule"],"sources":["../../../../src/components/containers/__tests__/AnnotationAccordion-test.js"],"sourcesContent":["import React from 'react';\nimport {AnnotationAccordion, PlotlyPanel, PlotlyFold} from '..';\nimport {Numeric} from '../../fields';\nimport {TestEditor, fixtures, mount} from 'lib/test-utils';\nimport {connectLayoutToPlot} from 'lib';\n\nconst LayoutPanel = connectLayoutToPlot(PlotlyPanel);\n\ndescribe('<AnnotationAccordion>', () => {\n  it('generates annotation PlotlyFolds with name == text', () => {\n    const fixture = fixtures.scatter({\n      layout: {annotations: [{text: 'hodor'}, {text: 'rodoh'}]},\n    });\n\n    const folds = mount(\n      <TestEditor {...{...fixture, onUpdate: jest.fn()}}>\n        <LayoutPanel name=\"Annotations\">\n          <AnnotationAccordion>\n            <Numeric attr=\"textangle\" />\n          </AnnotationAccordion>\n        </LayoutPanel>\n      </TestEditor>\n    ).find(PlotlyFold);\n\n    expect(folds.length).toBe(2);\n    expect(folds.at(0).prop('name')).toBe('hodor');\n    expect(folds.at(1).prop('name')).toBe('rodoh');\n  });\n\n  it('can add annotations', () => {\n    const fixture = fixtures.scatter();\n    const beforeUpdateLayout = jest.fn();\n    const editor = mount(\n      <TestEditor {...{...fixture, beforeUpdateLayout}}>\n        <LayoutPanel name=\"Annotations\">\n          <AnnotationAccordion canAdd>\n            <Numeric attr=\"textangle\" />\n          </AnnotationAccordion>\n        </LayoutPanel>\n      </TestEditor>\n    );\n\n    editor.find('button.js-add-button').simulate('click');\n\n    const payload = beforeUpdateLayout.mock.calls[0][0];\n    expect(payload.update).toEqual({'annotations[0]': {text: 'new text'}});\n  });\n\n  it('can delete annotations', () => {\n    const fixture = fixtures.scatter({\n      layout: {annotations: [{text: 'hodor'}, {text: 'rodoh'}]},\n    });\n    const beforeDeleteAnnotation = jest.fn();\n    const editor = mount(\n      <TestEditor {...{...fixture, beforeDeleteAnnotation}}>\n        <LayoutPanel name=\"Annotations\">\n          <AnnotationAccordion canAdd>\n            <Numeric attr=\"textangle\" />\n          </AnnotationAccordion>\n        </LayoutPanel>\n      </TestEditor>\n    );\n    editor.find('.js-fold__delete').at(0).simulate('click');\n\n    const update = beforeDeleteAnnotation.mock.calls[0][0];\n    expect(update.annotationIndex).toBe(0);\n  });\n});\n"],"mappings":"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","ignoreList":[]}