{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_draftJs","_draftJsExportHtml","_draftJsImportHtml","_configuration","_LinkDecorator","_LinkEditor","_StyleButtonGroup","_debounce","_DraftCommands","_decoratorStrategies","_getSelectionCoordinates","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","RichText","Component","constructor","props","context","state","editorState","value","toString","trim","length","createEditorStateFromHTML","EditorState","createEmpty","getDecorator","bind","getEditorStateAsHTML","focus","getParentContainerVerticalOffset","onChange","onBlur","onFocus","onLinkEditorBlur","onLinkEditorFocus","onLinkEditorChange","onLinkEditorClose","onKeyCommand","onReturnPressed","onStyleButtonToggle","renderLinkEditor","UNSAFE_componentWillReceiveProps","nextProps","linkEditorFocus","editorFocus","setState","shouldComponentUpdate","nextState","placeholder","CompositeDecorator","strategy","findLinkEntities","component","LinkDecorator","style","STYLE_MAP","LINK","html","contentState","stateFromHTML","inlineStyles","SUPERSCRIPT","element","SUBSCRIPT","defaultBlockTag","decorator","createWithContent","getCurrentContent","stateToHTML","STYLES_TO_HTML_TAGS","editorInput","document","querySelector","scrollTop","selectedLinkID","selection","getSelection","entityKey","getEntityKeyAt","newState","cursorHasLink","assign","htmlContent","replace","debounce","linkID","urlValue","selectionState","Entity","replaceData","url","updatedEditorState","RichUtils","toggleLink","command","newEditorState","handleKeyCommand","insertSoftNewline","inlineStyle","toggleInlineStyle","linkEntity","getEntityByKey","linkURL","getData","coordinates","getCoordinates","createElement","onURLChange","onClose","render","linkIsSelected","Boolean","className","styles","INLINE_STYLES","currentStyle","getCurrentInlineStyle","onToggle","onClick","Editor","customStyleMap","handleReturn","spellCheck","ref","input","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","func","isRequired","string","any","defaultProps","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../../../src/components/widgets/text_editors/RichText/index.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {CompositeDecorator, Editor, EditorState, Entity, RichUtils} from 'draft-js';\nimport {stateToHTML} from '@plotly/draft-js-export-html';\nimport {stateFromHTML} from 'draft-js-import-html';\n\n// Constants\nimport {\n  SUPERSCRIPT,\n  SUBSCRIPT,\n  LINK,\n  STYLES_TO_HTML_TAGS,\n  STYLE_MAP,\n  INLINE_STYLES,\n} from './configuration';\n\n// Components\nimport LinkDecorator from './LinkDecorator';\nimport LinkEditor from './LinkEditor';\nimport StyleButtonGroup from './StyleButtonGroup';\n\n// Libraries\nimport debounce from './debounce';\nimport {\n  getEntityKeyAt,\n  getEntityByKey,\n  toggleInlineStyle,\n  handleKeyCommand,\n  insertSoftNewline,\n  cursorHasLink,\n} from './DraftCommands';\nimport {findLinkEntities} from './decoratorStrategies';\nimport getCoordinates from './getSelectionCoordinates';\n\nclass RichText extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    /*\n     * Initially set state based on the plotly.js annotation content.\n     * After this, as long as this component is mounted, it owns the source\n     * of truth for the annotation value via `this.state.editorState`.\n     * This state may be updated externally via a prop update.\n     * See `UNSAFE_componentWillReceiveProps`.\n     */\n    this.state = {\n      editorState: props.value.toString().trim().length\n        ? this.createEditorStateFromHTML(props.value)\n        : EditorState.createEmpty(this.getDecorator()),\n    };\n\n    this.getDecorator = this.getDecorator.bind(this);\n    this.createEditorStateFromHTML = this.createEditorStateFromHTML.bind(this);\n    this.getEditorStateAsHTML = this.getEditorStateAsHTML.bind(this);\n    this.focus = this.focus.bind(this);\n    this.getParentContainerVerticalOffset = this.getParentContainerVerticalOffset.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onLinkEditorBlur = this.onLinkEditorBlur.bind(this);\n    this.onLinkEditorFocus = this.onLinkEditorFocus.bind(this);\n    this.onLinkEditorChange = this.onLinkEditorChange.bind(this);\n    this.onLinkEditorClose = this.onLinkEditorClose.bind(this);\n    this.onKeyCommand = this.onKeyCommand.bind(this);\n    this.onReturnPressed = this.onReturnPressed.bind(this);\n    this.onStyleButtonToggle = this.onStyleButtonToggle.bind(this);\n    this.renderLinkEditor = this.renderLinkEditor.bind(this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const {linkEditorFocus, editorFocus} = this.state;\n\n    /*\n     * Don't worry about what plotly.js thinks the annotation value\n     * should be while we're using our editor, for these reasons:\n     *\n     * 1. The editor should be considered the source of truth, unless the\n     *    user is actually editing the annotation inline, in the chart.\n     * 2. Sometimes we get updates with stale values.\n     */\n    if (linkEditorFocus || editorFocus) {\n      return;\n    }\n\n    // Sync editor state with plotly annotation value.\n    const editorState = this.createEditorStateFromHTML(nextProps.value);\n\n    this.setState({editorState});\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const {placeholder, value} = this.props;\n    const {editorState, linkEditorFocus} = this.state;\n\n    // If relevant props or state changed, return true.\n    if (\n      // Always update when user is editing link\n      linkEditorFocus ||\n      placeholder !== nextProps.placeholder ||\n      value !== nextProps.value ||\n      editorState !== nextState.editorState\n    ) {\n      return true;\n    }\n\n    // Compare incoming value with HTML representation of state.\n    return nextProps.value !== this.getEditorStateAsHTML(editorState);\n  }\n\n  getDecorator() {\n    return new CompositeDecorator([\n      {\n        strategy: findLinkEntities,\n        component: LinkDecorator,\n\n        // Props for the LinkDecorator component\n        props: {\n          style: STYLE_MAP[LINK],\n        },\n      },\n    ]);\n  }\n\n  createEditorStateFromHTML(html) {\n    const contentState = stateFromHTML(html, {\n      inlineStyles: {\n        [SUPERSCRIPT]: {element: 'sup'},\n        [SUBSCRIPT]: {element: 'sub'},\n      },\n      defaultBlockTag: null,\n    });\n\n    const decorator = this.getDecorator();\n\n    /*\n     * Work around issue described here:\n     * https://github.com/facebook/draft-js/issues/185\n     * #issuecomment-217207612\n     */\n\n    // Parse once to generate entity instances\n    EditorState.createWithContent(contentState);\n\n    // Now we can add our decorator\n    return EditorState.createWithContent(contentState, decorator);\n  }\n\n  getEditorStateAsHTML(editorState) {\n    const contentState = editorState.getCurrentContent();\n\n    return stateToHTML(contentState, {\n      defaultBlockTag: null,\n      inlineStyles: STYLES_TO_HTML_TAGS,\n    });\n  }\n\n  focus() {\n    this.editorInput.focus();\n  }\n\n  // Used to properly calculate user selection coordinates.\n  getParentContainerVerticalOffset() {\n    return document.querySelector('.panel').scrollTop;\n  }\n\n  onChange(editorState) {\n    const {selectedLinkID} = this.state;\n    const selection = editorState.getSelection();\n    const entityKey = getEntityKeyAt(editorState, selection);\n\n    const newState = {editorState};\n\n    // Update selected link ID\n    if (!cursorHasLink(editorState, selection)) {\n      // If a link is no longer selected, clear selected link ID state\n      Object.assign(newState, {\n        selectedLinkID: null,\n      });\n    } else if (selectedLinkID !== entityKey) {\n      // If link selection is new / different link selected, update it\n      Object.assign(newState, {\n        selectedLinkID: entityKey,\n      });\n    }\n\n    // Update internal state\n    this.setState(newState);\n\n    // Dispatch changes to plotly.js\n    // TODO consider moving to render (plotly.js is a render target)\n    let htmlContent = this.getEditorStateAsHTML(editorState).replace(/<br>\\n*/, '<br>');\n    if (htmlContent === '<br>') {\n      htmlContent = ' ';\n    }\n    if (this.props.value !== htmlContent) {\n      debounce(this.props.onChange, [htmlContent]);\n    }\n  }\n\n  onBlur() {\n    this.setState({\n      editorFocus: false,\n    });\n  }\n\n  onFocus() {\n    this.setState({\n      editorFocus: true,\n    });\n  }\n\n  onLinkEditorBlur() {\n    this.setState({\n      linkEditorFocus: false,\n    });\n  }\n\n  onLinkEditorFocus() {\n    this.setState({\n      linkEditorFocus: true,\n    });\n  }\n\n  onLinkEditorChange(linkID, urlValue) {\n    const {editorState} = this.state;\n    const selectionState = editorState.getSelection();\n\n    // Update link URL\n    Entity.replaceData(linkID, {url: urlValue});\n\n    // Trigger an editor state update\n    const updatedEditorState = RichUtils.toggleLink(editorState, selectionState, linkID);\n\n    this.onChange(updatedEditorState);\n  }\n\n  /**\n   * Will be called by LinkEditor when the user confirms or cancels new URL.\n   * Will not be called if LinkEditor is closed by moving the cursor off of\n   * the selected LINK entity.\n   *\n   * @param   {String} linkID The link entity key related to this LinkEditor\n   * @returns {undefined}\n   */\n  onLinkEditorClose() {\n    /*\n     * Focus on editor immediately to avoid error that occurs when\n     * `selection.extend` is called and another element has focus.\n     * https://bugzilla.mozilla.org/show_bug.cgi?id=921444\n     * https://github.com/facebook/draft-js/blob/342576bf7186d07c82a41d9ca8169130669747d6/src/component/selection/setDraftEditorSelection.js#L128-L134\n     */\n    this.focus();\n\n    // Hide the editor.\n    this.setState({\n      linkEditorFocus: false,\n      selectedLinkID: null,\n    });\n  }\n\n  onKeyCommand(command) {\n    const newEditorState = handleKeyCommand(this.state.editorState, command);\n\n    if (newEditorState) {\n      this.onChange(newEditorState);\n\n      // Let draft-js know that keyboard command is handled.\n      return true;\n    }\n\n    // Default draft-js implementation\n    return false;\n  }\n\n  onReturnPressed() {\n    const newEditorState = insertSoftNewline(this.state.editorState);\n\n    // Update internal and external state\n    this.onChange(newEditorState);\n\n    // Cancel draft-js implementation\n    return true;\n  }\n\n  onStyleButtonToggle(inlineStyle) {\n    const newEditorState = toggleInlineStyle(this.state.editorState, inlineStyle);\n\n    if (newEditorState) {\n      this.onChange(newEditorState);\n    }\n  }\n\n  renderLinkEditor(selectedLinkID) {\n    if (!selectedLinkID) {\n      return null;\n    }\n\n    // All entities are link entities.\n    const linkEntity = getEntityByKey(selectedLinkID);\n    const linkURL = linkEntity.getData().url;\n\n    const coordinates = getCoordinates();\n\n    return (\n      <LinkEditor\n        onFocus={this.onLinkEditorFocus}\n        onURLChange={this.onLinkEditorChange}\n        onBlur={this.onLinkEditorBlur}\n        onClose={this.onLinkEditorClose}\n        coordinates={coordinates}\n        linkID={selectedLinkID}\n        linkURL={linkURL}\n      />\n    );\n  }\n\n  render() {\n    const {editorState, selectedLinkID} = this.state;\n    const linkIsSelected = Boolean(selectedLinkID);\n\n    return (\n      <div className=\"rich-text-editor__root\">\n        <StyleButtonGroup\n          styles={INLINE_STYLES}\n          currentStyle={editorState.getCurrentInlineStyle()}\n          linkIsSelected={linkIsSelected}\n          onToggle={this.onStyleButtonToggle}\n        />\n        <div className=\"rich-text-editor__editor\" onClick={this.focus}>\n          <Editor\n            customStyleMap={STYLE_MAP}\n            editorState={editorState}\n            handleReturn={this.onReturnPressed}\n            handleKeyCommand={this.onKeyCommand}\n            onChange={this.onChange}\n            onBlur={this.onBlur}\n            onFocus={this.onFocus}\n            placeholder={this.props.placeholder}\n            spellCheck={false}\n            ref={(input) => (this.editorInput = input)}\n          />\n        </div>\n        {this.renderLinkEditor(selectedLinkID)}\n      </div>\n    );\n  }\n}\n\nRichText.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  value: PropTypes.any,\n};\n\nRichText.defaultProps = {\n  placeholder: '',\n  value: '',\n};\n\nexport default RichText;\n"],"mappings":"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","ignoreList":[]}