{"version":3,"file":"NumericInput.js","names":["_EditableText","_interopRequireDefault","require","_react","_interopRequireWildcard","_propTypes","_fastIsnumeric","_reactRangeslider","_plotlyIcons","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","__signature__","signature","UP_ARROW","exports","DOWN_ARROW","NumericInput","Component","constructor","props","state","value","numericInputClassName","getNumericInputClassName","onChange","bind","updateValue","onKeyDown","onWheel","isNumeric","concat","editableClassName","UNSAFE_componentWillReceiveProps","nextProps","setState","keyCode","incrementValue","stopPropagation","preventDefault","deltaY","newValue","max","min","integerOnly","updatedValue","Number","Math","floor","onUpdate","direction","defaultValue","step","stepmode","valueUpdate","x","parseFloat","absMode","renderArrows","showArrows","showSlider","createElement","className","onClick","CarretUpIcon","CarretDownIcon","renderSlider","tooltip","render","placeholder","text","type","units","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","any","string","bool","number","func","isRequired","oneOfType","defaultProps","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/widgets/NumericInput.js"],"sourcesContent":["import EditableText from './EditableText';\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport isNumeric from 'fast-isnumeric';\nimport Slider from 'react-rangeslider';\nimport {CarretDownIcon, CarretUpIcon} from 'plotly-icons';\n\nexport const UP_ARROW = 38;\nexport const DOWN_ARROW = 40;\n\nexport default class NumericInput extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.value,\n      numericInputClassName: this.getNumericInputClassName(props.value),\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.updateValue = this.updateValue.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n  }\n\n  getNumericInputClassName(value) {\n    return isNumeric(value) || value === ''\n      ? `numeric-input__number ${this.props.editableClassName ? this.props.editableClassName : ''}`\n      : `numeric-input__number +error ${\n          this.props.editableClassName ? this.props.editableClassName : ''\n        }`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.state.value) {\n      this.setState({value: nextProps.value});\n    }\n  }\n\n  onKeyDown(e) {\n    switch (e.keyCode) {\n      case UP_ARROW:\n        this.incrementValue('increase');\n        break;\n      case DOWN_ARROW:\n        this.incrementValue('decrease');\n        break;\n      default:\n        break;\n    }\n  }\n\n  onWheel(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    if (e.deltaY > 0) {\n      this.incrementValue('increase');\n    } else {\n      this.incrementValue('decrease');\n    }\n  }\n\n  onChange(value) {\n    this.setState({value, numericInputClassName: this.getNumericInputClassName(value)});\n  }\n\n  updateValue(newValue) {\n    const {max, min, integerOnly} = this.props;\n    let updatedValue = newValue;\n\n    if (updatedValue === '') {\n      this.setState({\n        value: this.props.value,\n        numericInputClassName: this.getNumericInputClassName(this.props.value),\n      });\n      return;\n    }\n\n    // When the user blurs on non-numeric data reset the component\n    // to the last known good value (this.props.value).\n    if (!isNumeric(updatedValue)) {\n      this.setState({\n        value: updatedValue,\n        numericInputClassName: this.getNumericInputClassName(updatedValue),\n      });\n      return;\n    }\n\n    updatedValue = Number(updatedValue);\n    if (integerOnly) {\n      updatedValue = Math.floor(updatedValue);\n    }\n\n    if (isNumeric(min)) {\n      updatedValue = Math.max(min, updatedValue);\n    }\n\n    if (isNumeric(max)) {\n      updatedValue = Math.min(max, updatedValue);\n    }\n\n    this.props.onUpdate(updatedValue);\n  }\n\n  incrementValue(direction) {\n    const {defaultValue, min, step = 1, stepmode = 'absolute'} = this.props;\n    const {value} = this.state;\n\n    let valueUpdate;\n    if (isNumeric(value)) {\n      const x = parseFloat(value);\n      const absMode = stepmode === 'absolute';\n      if (direction === 'increase') {\n        valueUpdate = absMode ? x + step : x * (1 + step);\n      } else {\n        valueUpdate = absMode ? x - step : x / (1 + step);\n      }\n    } else {\n      // if we are multi-valued and the user is incrementing or decrementing\n      // update with some sane value so we can \"break\" out of multi-valued mode.\n      if (isNumeric(defaultValue)) {\n        valueUpdate = defaultValue;\n      } else {\n        // TODO smarter handling depending if user decrements or increments?\n        valueUpdate = min || 0;\n      }\n    }\n\n    // incrementers blur the line between blur and onChange.\n    this.updateValue(valueUpdate);\n  }\n\n  renderArrows() {\n    if (!this.props.showArrows || this.props.showSlider) {\n      return null;\n    }\n\n    return (\n      <div className=\"numeric-input__caret-box\">\n        <div\n          className=\"numeric-input__caret js-numeric-increase\"\n          onClick={this.incrementValue.bind(this, 'increase')}\n        >\n          <CarretUpIcon className=\"numeric-top-caret-modifier\" />\n        </div>\n        <div\n          className=\"numeric-input__caret js-numeric-decrease\"\n          onClick={this.incrementValue.bind(this, 'decrease')}\n        >\n          <CarretDownIcon className=\"numeric-bottom-caret-modifier\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderSlider() {\n    if (!this.props.showSlider) {\n      return null;\n    }\n\n    return (\n      <Slider\n        min={this.props.min}\n        max={this.props.max}\n        step={this.props.step}\n        value={parseFloat(this.state.value)}\n        onChange={this.updateValue}\n        tooltip={false}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"numeric-input__wrapper\">\n        <EditableText\n          className={this.state.numericInputClassName}\n          placeholder={this.props.placeholder}\n          text={this.state.value}\n          type=\"text\"\n          onChange={this.onChange}\n          onUpdate={this.updateValue}\n          onKeyDown={this.onKeyDown}\n          onWheel={this.onWheel}\n        />\n        {this.renderArrows()}\n        {this.renderSlider()}\n        {this.props.units ? this.props.units : null}\n      </div>\n    );\n  }\n}\n\nNumericInput.propTypes = {\n  defaultValue: PropTypes.any,\n  editableClassName: PropTypes.string,\n  integerOnly: PropTypes.bool,\n  max: PropTypes.number,\n  min: PropTypes.number,\n  onUpdate: PropTypes.func.isRequired,\n  placeholder: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  showArrows: PropTypes.bool,\n  showSlider: PropTypes.bool,\n  step: PropTypes.number,\n  stepmode: PropTypes.string,\n  value: PropTypes.any,\n  units: PropTypes.string,\n};\n\nNumericInput.defaultProps = {\n  showArrows: true,\n};\n"],"mappings":"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","ignoreList":[]}