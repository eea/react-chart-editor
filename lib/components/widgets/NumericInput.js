"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.UP_ARROW=exports.DOWN_ARROW=void 0;var _EditableText=_interopRequireDefault(require("./EditableText"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _fastIsnumeric=_interopRequireDefault(require("fast-isnumeric"));var _reactRangeslider=_interopRequireDefault(require("react-rangeslider"));var _plotlyIcons=require("plotly-icons");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(function(){var enterModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.enterModule:undefined;enterModule&&enterModule(module)})();var __signature__=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default.signature:function(a){return a};const UP_ARROW=exports.UP_ARROW=38;const DOWN_ARROW=exports.DOWN_ARROW=40;function Slider(props){const[value,setValue]=_react.default.useState(props.value);(0,_react.useEffect)(()=>{if(props.value!==value){setValue(props.value)}},[props.value]);return _react.default.createElement(_reactRangeslider.default,{min:props.min,max:props.max,step:props.step,value:value,onChange:setValue,onChangeComplete:()=>{props.onChange(value)},tooltip:false})}__signature__(Slider,"useState{[value, setValue](props.value)}\nuseEffect{}");Slider.propTypes={min:_propTypes.default.number,max:_propTypes.default.number,step:_propTypes.default.number,value:_propTypes.default.number,onChange:_propTypes.default.func.isRequired};class NumericInput extends _react.Component{constructor(props){super(props);this.state={value:props.value,numericInputClassName:this.getNumericInputClassName(props.value)};this.onChange=this.onChange.bind(this);this.updateValue=this.updateValue.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.onWheel=this.onWheel.bind(this)}getNumericInputClassName(value){return(0,_fastIsnumeric.default)(value)||value===""?"numeric-input__number ".concat(this.props.editableClassName?this.props.editableClassName:""):"numeric-input__number +error ".concat(this.props.editableClassName?this.props.editableClassName:"")}UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.value!==this.state.value){this.setState({value:nextProps.value,numericInputClassName:this.getNumericInputClassName(nextProps.value)})}}onKeyDown(e){switch(e.keyCode){case UP_ARROW:this.incrementValue("increase");break;case DOWN_ARROW:this.incrementValue("decrease");break;default:break}}onWheel(e){e.stopPropagation();e.preventDefault();if(e.deltaY>0){this.incrementValue("increase")}else{this.incrementValue("decrease")}}onChange(value){this.setState({value,numericInputClassName:this.getNumericInputClassName(value)})}updateValue(newValue){const{max,min,integerOnly}=this.props;let updatedValue=newValue;if(updatedValue===""){this.setState({value:this.props.value,numericInputClassName:this.getNumericInputClassName(this.props.value)});return}if(!(0,_fastIsnumeric.default)(updatedValue)){this.setState({value:updatedValue,numericInputClassName:this.getNumericInputClassName(updatedValue)});return}updatedValue=Number(updatedValue);if(integerOnly){updatedValue=Math.floor(updatedValue)}if((0,_fastIsnumeric.default)(min)){updatedValue=Math.max(min,updatedValue)}if((0,_fastIsnumeric.default)(max)){updatedValue=Math.min(max,updatedValue)}this.props.onUpdate(parseFloat(updatedValue.toFixed(4)))}incrementValue(direction){const{defaultValue,min,step=1,stepmode="absolute"}=this.props;const{value}=this.state;let valueUpdate;if((0,_fastIsnumeric.default)(value)){const x=parseFloat(value);const absMode=stepmode==="absolute";if(direction==="increase"){valueUpdate=absMode?x+step:x*(1+step)}else{valueUpdate=absMode?x-step:x/(1+step)}}else{if((0,_fastIsnumeric.default)(defaultValue)){valueUpdate=defaultValue}else{valueUpdate=min||0}}this.updateValue(valueUpdate)}renderArrows(){if(!this.props.showArrows||this.props.showSlider){return null}return _react.default.createElement("div",{className:"numeric-input__caret-box"},_react.default.createElement("div",{className:"numeric-input__caret js-numeric-increase",onClick:this.incrementValue.bind(this,"increase")},_react.default.createElement(_plotlyIcons.CarretUpIcon,{className:"numeric-top-caret-modifier"})),_react.default.createElement("div",{className:"numeric-input__caret js-numeric-decrease",onClick:this.incrementValue.bind(this,"decrease")},_react.default.createElement(_plotlyIcons.CarretDownIcon,{className:"numeric-bottom-caret-modifier"})))}renderSlider(){if(!this.props.showSlider){return null}return _react.default.createElement(Slider,{min:this.props.min,max:this.props.max,step:this.props.step,value:parseFloat(this.state.value),onChange:this.updateValue,tooltip:false})}render(){return _react.default.createElement("div",{className:"numeric-input__wrapper"},_react.default.createElement(_EditableText.default,{className:this.state.numericInputClassName,placeholder:this.props.placeholder,text:this.state.value,type:"text",onChange:this.onChange,onUpdate:this.updateValue,onKeyDown:this.onKeyDown,onWheel:this.onWheel}),this.renderArrows(),this.renderSlider(),this.props.units?this.props.units:null)}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}exports.default=NumericInput;NumericInput.propTypes={defaultValue:_propTypes.default.any,editableClassName:_propTypes.default.string,integerOnly:_propTypes.default.bool,max:_propTypes.default.number,min:_propTypes.default.number,onUpdate:_propTypes.default.func.isRequired,placeholder:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.number]),showArrows:_propTypes.default.bool,showSlider:_propTypes.default.bool,step:_propTypes.default.number,stepmode:_propTypes.default.string,value:_propTypes.default.any,units:_propTypes.default.string};NumericInput.defaultProps={showArrows:true};;(function(){var reactHotLoader=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.default:undefined;if(!reactHotLoader){return}reactHotLoader.register(UP_ARROW,"UP_ARROW","/Users/razvan/Work/original-react-chart-editor/src/components/widgets/NumericInput.js");reactHotLoader.register(DOWN_ARROW,"DOWN_ARROW","/Users/razvan/Work/original-react-chart-editor/src/components/widgets/NumericInput.js");reactHotLoader.register(Slider,"Slider","/Users/razvan/Work/original-react-chart-editor/src/components/widgets/NumericInput.js");reactHotLoader.register(NumericInput,"NumericInput","/Users/razvan/Work/original-react-chart-editor/src/components/widgets/NumericInput.js")})();;(function(){var leaveModule=typeof reactHotLoaderGlobal!=="undefined"?reactHotLoaderGlobal.leaveModule:undefined;leaveModule&&leaveModule(module)})();
//# sourceMappingURL=NumericInput.js.map