{"version":3,"file":"ColorPicker.js","names":["_SketchFields","_interopRequireDefault","require","_react","_interopRequireWildcard","_propTypes","_tinycolor","_common","_reactColor","_plotlyIcons","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","__signature__","signature","extractRGB","c","rgb","getColorSource","source","hex","toTinyColor","tinycolor","Custom","Component","render","onChangeComplete","props","createElement","className","Hue","Alpha","Saturation","onChange","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","object","func","onVisibilityChange","CustomColorPicker","customPicker","ColorPicker","constructor","state","isVisible","onSelectedColorChange","toggleVisible","newColor","color","onColorChange","toRgbString","setState","prevState","_this$props$onVisibil","_this$props","_this$props$selectedC","selectedColor","colorText","toHexString","rgbString","_a","concat","_r","_g","_b","swatchStyle","backgroundColor","Fragment","style","onClick","selectedColorscale","marginLeft","flex","TrashIcon","size","onDeleteColor","cursor","float","isRequired","string","array","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/widgets/ColorPicker.js"],"sourcesContent":["import Fields from 'react-color/lib/components/sketch/SketchFields';\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport tinycolor from 'tinycolor2';\nimport {Alpha, Hue, Saturation} from 'react-color/lib/components/common';\nimport {CustomPicker as customPicker} from 'react-color';\nimport {TrashIcon} from 'plotly-icons';\n\n// Utility functions for converting ColorPicker color objects or raw strings\n// into TinyColor objects.\nconst extractRGB = (c) => c.rgb || c;\nconst getColorSource = (c) => (c.source === 'hex' ? c.hex : extractRGB(c));\nconst toTinyColor = (c) => tinycolor(getColorSource(c));\n\nclass Custom extends Component {\n  render() {\n    const {onChangeComplete} = this.props;\n\n    return (\n      <div className=\"colorpicker__outer\">\n        <div className=\"colorpicker__controls +flex\">\n          <div className=\"colorpicker__sliders\">\n            <div className=\"colorpicker__slider\">\n              <Hue {...this.props} />\n            </div>\n            <div className=\"colorpicker__slider\">\n              <Alpha {...this.props} />\n            </div>\n          </div>\n        </div>\n        <div className=\"colorpicker__saturation\">\n          <Saturation {...this.props} />\n        </div>\n        <div className=\"colorpicker__custom-input\">\n          <Fields {...this.props} onChange={onChangeComplete} />\n        </div>\n      </div>\n    );\n  }\n}\n\nCustom.propTypes = {\n  rgb: PropTypes.object,\n  onChangeComplete: PropTypes.func,\n  onVisibilityChange: PropTypes.func,\n};\n\nconst CustomColorPicker = customPicker(Custom);\n\nclass ColorPicker extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isVisible: false,\n    };\n\n    this.onSelectedColorChange = this.onSelectedColorChange.bind(this);\n    this.toggleVisible = this.toggleVisible.bind(this);\n  }\n\n  onSelectedColorChange(newColor) {\n    // We use our own toTinyColor because this value is a ColorPicker\n    // color value which is an object that needs unpacking. We also handle\n    // the case where a color string is passed in (just in case).\n    const color = toTinyColor(newColor);\n\n    // relayout call only wants a RGB String\n    this.props.onColorChange(color.toRgbString());\n  }\n\n  toggleVisible() {\n    this.setState(\n      (prevState) => ({isVisible: !prevState.isVisible}),\n      () => {\n        this.props.onVisibilityChange?.(this.state.isVisible);\n      }\n    );\n  }\n\n  render() {\n    // We use tinycolor here instead of our own toTinyColor as\n    // tinycolor handles `null` values and other weirdness we may\n    // expect from user data.\n    const selectedColor = tinycolor(this.props.selectedColor);\n    const colorText = selectedColor.toHexString();\n\n    // Convert rgba to rgb if necessary\n    const rgbString =\n      selectedColor._a >= 0\n        ? selectedColor.toRgbString()\n        : `rgb(${selectedColor._r},${selectedColor._g},${selectedColor._b})`;\n\n    // We need inline style here to assign the background color\n    // dynamically.\n    const swatchStyle = {backgroundColor: rgbString};\n\n    return (\n      <>\n        <div className=\"colorpicker__container\">\n          <div className=\"colorpicker\">\n            <div\n              className=\"colorpicker__swatch +cursor-clickable\"\n              style={swatchStyle}\n              onClick={this.toggleVisible}\n            />\n          </div>\n\n          <div className=\"colorpicker__selected-color +hover-grey\" onClick={this.toggleVisible}>\n            {colorText}\n          </div>\n\n          {this.props.selectedColorscale?.length > 2 && (\n            <div style={{marginLeft: '0.5rem', flex: '1'}}>\n              <TrashIcon\n                size=\"20px\"\n                onClick={this.props.onDeleteColor}\n                color=\"var(--color-accent)\"\n                style={{cursor: 'pointer', float: 'right'}}\n              />\n            </div>\n          )}\n        </div>\n\n        {this.state.isVisible && (\n          <CustomColorPicker color={rgbString} onChangeComplete={this.onSelectedColorChange} />\n        )}\n      </>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  onColorChange: PropTypes.func.isRequired,\n  onVisibilityChange: PropTypes.func,\n  onDeleteColor: PropTypes.func,\n  selectedColor: PropTypes.string,\n  selectedColorscale: PropTypes.array,\n};\n\nexport default ColorPicker;\n"],"mappings":"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","ignoreList":[]}