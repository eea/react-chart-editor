{"version":3,"file":"ColorPicker.js","names":["_SketchFields","_interopRequireDefault","require","_react","_interopRequireWildcard","_propTypes","_tinycolor","_common","_reactColor","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","enterModule","reactHotLoaderGlobal","undefined","module","_extends","assign","bind","arguments","length","apply","__signature__","signature","extractRGB","c","rgb","getColorSource","source","hex","toTinyColor","tinycolor","Custom","Component","render","onChangeComplete","props","createElement","className","Hue","Saturation","onChange","__reactstandin__regenerateByEval","key","code","eval","propTypes","PropTypes","object","func","onVisibilityChange","CustomColorPicker","customPicker","ColorPicker","constructor","state","isVisible","onSelectedColorChange","toggleVisible","newColor","color","onColorChange","toRgbString","setState","prevState","_this$props$onVisibil","_this$props","selectedColor","colorText","toHexString","rgbString","_a","concat","_r","_g","_b","swatchStyle","backgroundColor","Fragment","style","onClick","isRequired","string","_default","_default2","exports","reactHotLoader","register","leaveModule"],"sources":["../../../src/components/widgets/ColorPicker.js"],"sourcesContent":["import Fields from 'react-color/lib/components/sketch/SketchFields';\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport tinycolor from 'tinycolor2';\nimport {Hue, Saturation} from 'react-color/lib/components/common';\nimport {CustomPicker as customPicker} from 'react-color';\n\n// Utility functions for converting ColorPicker color objects or raw strings\n// into TinyColor objects.\nconst extractRGB = (c) => c.rgb || c;\nconst getColorSource = (c) => (c.source === 'hex' ? c.hex : extractRGB(c));\nconst toTinyColor = (c) => tinycolor(getColorSource(c));\n\nclass Custom extends Component {\n  render() {\n    const {onChangeComplete} = this.props;\n\n    return (\n      <div className=\"colorpicker__outer\">\n        <div className=\"colorpicker__controls +flex\">\n          <div className=\"colorpicker__sliders\">\n            <div className=\"colorpicker__slider\">\n              <Hue {...this.props} />\n            </div>\n          </div>\n        </div>\n        <div className=\"colorpicker__saturation\">\n          <Saturation {...this.props} />\n        </div>\n        <div className=\"colorpicker__custom-input\">\n          <Fields {...this.props} onChange={onChangeComplete} />\n        </div>\n      </div>\n    );\n  }\n}\n\nCustom.propTypes = {\n  rgb: PropTypes.object,\n  onChangeComplete: PropTypes.func,\n  onVisibilityChange: PropTypes.func,\n};\n\nconst CustomColorPicker = customPicker(Custom);\n\nclass ColorPicker extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isVisible: false,\n    };\n\n    this.onSelectedColorChange = this.onSelectedColorChange.bind(this);\n    this.toggleVisible = this.toggleVisible.bind(this);\n  }\n\n  onSelectedColorChange(newColor) {\n    // We use our own toTinyColor because this value is a ColorPicker\n    // color value which is an object that needs unpacking. We also handle\n    // the case where a color string is passed in (just in case).\n    const color = toTinyColor(newColor);\n\n    // relayout call only wants a RGB String\n    this.props.onColorChange(color.toRgbString());\n  }\n\n  toggleVisible() {\n    this.setState(\n      (prevState) => ({isVisible: !prevState.isVisible}),\n      () => {\n        this.props.onVisibilityChange?.(this.state.isVisible);\n      }\n    );\n  }\n\n  render() {\n    // We use tinycolor here instead of our own toTinyColor as\n    // tinycolor handles `null` values and other weirdness we may\n    // expect from user data.\n    const selectedColor = tinycolor(this.props.selectedColor);\n    const colorText = selectedColor.toHexString();\n\n    // Convert rgba to rgb if necessary\n    const rgbString =\n      selectedColor._a >= 0\n        ? selectedColor.toRgbString()\n        : `rgb(${selectedColor._r},${selectedColor._g},${selectedColor._b})`;\n\n    // We need inline style here to assign the background color\n    // dynamically.\n    const swatchStyle = {backgroundColor: rgbString};\n\n    return (\n      <>\n        <div className=\"colorpicker__container\">\n          <div className=\"colorpicker\">\n            <div\n              className=\"colorpicker__swatch +cursor-clickable\"\n              style={swatchStyle}\n              onClick={this.toggleVisible}\n            />\n          </div>\n\n          <div className=\"colorpicker__selected-color +hover-grey\" onClick={this.toggleVisible}>\n            {colorText}\n          </div>\n        </div>\n\n        {this.state.isVisible && (\n          <CustomColorPicker color={rgbString} onChangeComplete={this.onSelectedColorChange} />\n        )}\n      </>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  onColorChange: PropTypes.func.isRequired,\n  onVisibilityChange: PropTypes.func,\n  selectedColor: PropTypes.string,\n};\n\nexport default ColorPicker;\n"],"mappings":"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","ignoreList":[]}